/** jQuery-USOS 0.9.7 -- https://github.com/MUCI/jquery-usos */ 
(function(d){var v="usosApiTable";function w(z,A){this._state=z;this._lastPublishedState=null;this.onStateChanged=A;this.publishState()}w.prototype.publishState=function(A){var z=this.getState();if((!A)&&(z==this.lastPublishedState)){return}this._lastPublishedState=z;this.onStateChanged(z)};w.prototype.getState=function(){return this._state};w.prototype.setState=function(z){this._state=z;this.publishState()};w.prototype.destroy=function(){};function x(B,z,C){this.paramName=B;this._lastPublishedState=null;this.onStateChanged=C;var A=this;d(window).bind("hashchange."+v,function(D){A.publishState()});if(this.getState()===null){this.setState(z)}else{this.publishState()}}x.prototype.publishState=function(A){var z=this.getState();if((!A)&&(z==this.lastPublishedState)){return}this._lastPublishedState=z;this.onStateChanged(z)};x.prototype.getState=function(){var z=d.bbq.getState(this.paramName);if(z){return z}return null};x.prototype.setState=function(A){var z={};z[this.paramName]=A;d.bbq.pushState(z)};x.prototype.destroy=function(){d(window).unbind("hashchange."+v)};var l=function(z){return(d.map(z,function(A){return(A.ascending?"":"-")+A.column})).join("|")};var p=function(z){return d.map(z.split("|"),function(A){return{column:A.replace("-",""),ascending:A[0]!="-"}})};var j=function(A){var z;if(A.currentOrder.length>0){z=A.currentOrder[0]}else{z={column:"",ascending:true}}A.elements.$sorters.each(function(){var B=d(this).data(v);if(B.orderRules[0].column==z.column){B.$img.attr("class",z.ascending?"ua-ascending":"ua-descending");d(this).closest("td").addClass("ua-sorted-by")}else{B.$img.removeClass("ua-ascending ua-descending");d(this).closest("td").removeClass("ua-sorted-by")}})};var n=function(z){return d.extend({},z.settings.params,{order_by:l(z.currentOrder),start:z.currentOffset,num:z.settings.pageLength})};var h=function(E){var A=d("<div>").addClass("ua-container").addClass("ua-table-container");var B=d("<table>").addClass("ua-table");if(E.nowrap){B.addClass("ua-ellipsis-tds")}A.append(B);var D=i(E);B.append(D);var z=d("<tbody>").addClass("ua-contents");B.append(z);var C=a(E);B.append(C);return A};var i=function(A){var z=d("<thead>");var B=d("<tr>");z.append(B);d.each(A.columns,function(C,D){var E=d("<td>");if(D.width){E.css("width",D.width)}if(D.align){E.css("text-align",D.align)}if(D.sortable){E.addClass("ua-sortable");E.append(d("<a>").attr("tabindex",0).addClass("ua-sorter").attr("data-ua-fields",D.field).html(D.label))}else{E.addClass("ua-nonsortable");E.html(D.label)}if(D.cssClass){d.each(D.cssClass.split(" "),function(G,F){if(F){E.addClass(F)}})}B.append(E)});if(A.actions.length>0){B.append(d("<td>").addClass("ua-nonsortable").addClass("ua-actions").css("width",(1+A.actions.length*19)+"px"))}return z};var u=function(z){var A=z.columns.length;if(z.actions.length>0){A++}return A};var s=function(C,B){if(!C.elements.$contents.is(":parent")){C.elements.$contents.html("<tr class='ua-placeholder'><td></td></tr>").find("td").attr("colspan",u(C.settings))}var A=C.elements.$div.find(".ua-overlay-background");if(A.length===0){A=d("<div>").addClass("ua-overlay-background").hide();C.elements.$div.append(A)}var z=C.elements.$div.find(".ua-overlay-foreground");if(z.length===0){z=d("<table>").addClass("ua-overlay-foreground").hide().append(d("<tr>").append(d("<td>")));C.elements.$div.append(z)}z.find("td").empty().append(B.clone());A.css("left",C.elements.$contents.position().left+1).css("top",C.elements.$contents.position().top+1).css("width",C.elements.$contents.width()-1).css("height",C.elements.$contents.height()-1).fadeIn("slow");z.delay(200).each(function(){if(!d.contains(document.documentElement,A[0])){return}z.css(C.elements.$contents.position()).css("width",C.elements.$contents.width()).css("height",C.elements.$contents.height()).fadeIn(500)})};var b=function(z){z.elements.$div.find(".ua-overlay-background").remove();z.elements.$div.find(".ua-overlay-foreground").remove()};var a=function(A){var z=d("<tfoot>").append(d("<tr>").append(d("<td>").attr("colspan",u(A)).append(d("<table>").css("width","100%").append(d("<tr>")))));z.find("table tr").append(d("<td>").css("vertical-align","middle").append(d("<div>").addClass("ua-summary"))).append(d("<td>").append(d("<ul>").addClass("ua-more").append(d("<div>").addClass("ua-prevpage").button({disabled:true,icons:{primary:"ui-icon-carat-1-w"},label:d.usosCore.lang("POPRZEDNIA STRONA","PREVIOUS PAGE")})).append(d("<div>").addClass("ua-nextpage").button({disabled:true,icons:{secondary:"ui-icon-carat-1-e"},label:d.usosCore.lang("NASTĘPNA STRONA","NEXT PAGE")}))));return z};var q=function(A,z){if(typeof z==="string"){z=d("<span>").text(z)}A.elements.$summary.empty().append(z.clone())};var c=function(z){return d("<td>").addClass("ua-datatype-langdict").append(d.usosCore.lang({langdict:z,format:"jQuery"}))};var r=function(z){var A=d("<td>").addClass("ua-datatype-boolean");if(z){A.addClass("ua-true").text(d.usosCore.lang("TAK","YES"))}else{A.addClass("ua-false").text(d.usosCore.lang("NIE","NO"))}return A};var g="1";var f=function(z){return(g+","+z.offset+","+l(z.orderRules).replace(/\|/g,","))};var m=function(z){try{var A=z.split(",");if(A[0]=="1"){return{offset:parseInt(A[1],10),orderRules:p(A.slice(2).join("|"))}}else{throw"Unknown serializer version"}}catch(B){d.usosCore._console.error("Could not deserialize apiTable state:",B);return{offset:0,orderRules:[]}}};var k=function(z,A){if(!A.field){return d("<td>").text("Missing 'field' key in column spec.")}var C;var B=z;d.each(A.field.split("."),function(D,E){B=B[E]});if(typeof B==="object"){C=c(B)}else{if(typeof B==="number"){C=d("<td>").addClass("ua-datatype-number").text(B)}else{if(typeof B==="string"){C=d("<td>").addClass("ua-datatype-string").text(B)}else{if(typeof B==="boolean"){C=r(B)}else{if(B===null){C=d("<td>").append(d("<span>").addClass("ua-note").text(d.usosCore.lang("(brak danych)","(no data)")))}else{if(B===undefined){C=d("<td>").text("Missing field '"+A.field+"' in data feed.")}else{C=d("<td>").text("Unknown column data type.")}}}}}}return C};var t=function(z){return this.each(function(){var D=d(this);if(D.data(v)){D.usosApiTable("destroy")}D.empty();var F={};D.data(v,F);var B={hashParam:null,sourceId:"default",method:null,params:{},offsetReset:false,columns:null,defaultOrder:null,pageLength:6,actions:[],emptyMessage:{pl:"Brak wyników",en:"No results"},nowrap:true};F.settings=d.extend({},B,z);D.append(h(F.settings));F.elements={$root:D,$div:D.find(".ua-table-container"),$table:D.find(".ua-table"),$summary:D.find(".ua-summary"),$sorters:D.find(".ua-sorter").each(function(){var I=d(this);var H=d("<div>").css("margin-left","3px").hide();I.after(H);var G=d("<span>").addClass("ua-loading").hide();H.after(G);I.data(v,{$img:H,$loader:G,orderRules:p(I.attr("data-ua-fields"))});if(I.parent().hasClass("ua-sortable")){I.parent().click(function(){I.trigger("click")})}}).click(function(){if(!F.initialized){return}var N=d(this).data(v);F.elements.$table.find("thead .ua-loading").hide();N.$loader.show();var M=d.map(N.orderRules,function(Q,P){return Q.column});F.currentOffset=0;var H=true;if(F.currentOrder.length>0&&F.currentOrder[0].column==M[0]&&F.currentOrder[0].ascending===true){H=false}var O=[];var G=[];var J;for(J=0;J<F.currentOrder.length;J++){if(d.inArray(F.currentOrder[J].column,M)!=-1){O[F.currentOrder[J].column]=F.currentOrder[J]}else{G.push(F.currentOrder[J])}}var I=[];for(J=0;J<M.length;J++){var L=null;if(O[M[J]]){L=O[M[J]];L.ascending=H}else{L={column:M[J],ascending:H}}I.push(L)}var K=I;for(J=0;J<G.length;J++){K.push(G[J])}F.stateCoordinator.setState(f({orderRules:K,offset:0}));return false}).keypress(function(G){if(G.which==13){d(this).click()}}),$contents:D.find(".ua-contents"),$prevPage:D.find(".ua-prevpage").click(function(){d(this).button("disable");F.stateCoordinator.setState(f({offset:F.currentOffset-F.settings.pageLength,orderRules:F.currentOrder}))}),$nextPage:D.find(".ua-nextpage").click(function(){d(this).button("disable");F.stateCoordinator.setState(f({offset:F.currentOffset+F.settings.pageLength,orderRules:F.currentOrder}))})};F.syncObject={};F.defaultAction=null;d.each(F.settings.actions,function(G,H){if(H.isDefault){if(F.defaultAction){d.usosCore._console.error("More than one default action defined.");return false}F.defaultAction=H}});F.currentOrder=null;F.currentOffset=0;var A=f({offset:0,orderRules:p(F.settings.defaultOrder)});var E=function(G){F.initialized=true;var H=m(G);F.currentOrder=H.orderRules;F.currentOffset=H.offset;D.usosApiTable("reload")};if(F.settings.hashParam){F.stateCoordinator=new x(F.settings.hashParam,A,E)}else{F.stateCoordinator=new w(A,E)}if(F.settings.offsetReset){var C=m(F.stateCoordinator.getState());C.offset=0;F.stateCoordinator.setState(f(C))}})};var o=function(){return this.each(function(){var z=d(this);var A=z.data(v);d.usosCore._console.log("Reloading with order "+l(A.currentOrder)+"...");j(A);s(A,d("<span>").addClass("ua-loading"));q(A,d("<span>").addClass("ua-loading").text(d.usosCore.lang("Wczytywanie...","Loading...")));d.usosCore.usosapiFetch({sourceId:A.settings.sourceId,method:A.settings.method,params:n(A),syncMode:"receiveLast",syncObject:A.syncObject,success:function(C){if(A.destroyed){return}A.elements.$contents.empty();d.each(C.items,function(F,D){var G=d("<tr>");G.data(v,D);d.each(A.settings.columns,function(I,H){var J;if(H.customTdFormatter){J=H.customTdFormatter(D)}else{J=k(D,H)}if(H.cssClass){d.each(H.cssClass.split(" "),function(L,K){if(K){J.addClass(K)}})}if(H.align){J.css("text-align",H.align)}if(A.settings.nowrap){J.on("mouseenter",function(){var M=d(this);if(M.attr("title")){return}var L=false;var K=M.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");L=K.width()>M.width();K.remove();if(L){M.attr("title",M.text())}})}G.append(J)});if(A.settings.actions.length>0){var E=d("<td>").addClass("ua-actions");d.each(A.settings.actions,function(I,J){var H=d("<a>").attr("tabindex",0).addClass("ua-action-icon").append(d("<div>").addClass("ui-icon").addClass(J.iconClass)).attr("title",J.label).click(function(){J.click(D);return false}).keypress(function(K){if(K.which==13){d(this).click()}});if((J.isVisible)&&(!J.isVisible(D))){H.css("visibility","hidden")}E.append(H)});G.append(E)}A.elements.$contents.append(G)});if(A.defaultAction){A.elements.$contents.find("tr").hover(function(){d(this).addClass("ua-hovered")},function(){d(this).removeClass("ua-hovered")}).click(function(){A.defaultAction.click(d(this).data(v))})}A.elements.$nextPage.button(C.next_page?"enable":"disable");A.elements.$prevPage.button(A.currentOffset>0?"enable":"disable");A.elements.$table.colResizable({liveDrag:true,headerOnly:true});A.elements.$table.find("thead .ua-loading").hide();b(A);if(A.currentOffset+C.items.length===0){var B=d("<span>").html(d.usosCore.lang(A.settings.emptyMessage));s(A,B);q(A,"")}else{q(A,d.usosCore.lang("Pokazywane elementy ","Showing items ")+(A.currentOffset+1)+".."+(A.currentOffset+C.items.length))}},error:function(E,D,C){var B=d("<span>").html(d.usosCore.lang("Wystąpił błąd podczas wczytywania. Spróbuj odświeżyć stronę (F5).","There was an error while loading. Try to refresh the page (F5)."));s(A,B);q(A,B.clone(true));A.elements.$table.find("thead .ua-loading").hide()}})})};var y=function(){return this.each(function(){var A=d(this);var z=A.data(v);z.destroyed=true;z.stateCoordinator.destroy();z.elements.$root.find("*").addBack().unbind();A.removeData(v)})};var e={init:t,reload:o,destroy:y};d.fn.usosApiTable=function(z){if(e[z]){return e[z].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof z==="object")||(!z)){return t.apply(this,arguments)}else{d.error("Method "+z+" does not exist on jQuery."+v)}}}})(jQuery);(function(d){var b="usosCore";var h={settings:null};var g=function(i){if(h.settings!==null){d.usosCore._console.error("jQuery.usosCore is already initialized! Subsequent calls to init will be ingored!");return}var j={langpref:"en",usosAPIs:{"default":{methodUrl:null,extraParams:{}}},entityURLs:{"entity/users/user":null,"entity/fac/faculty":null,"entity/slips/template":null}};h.settings=d.extend(true,{},j,i)};var e=function(){var i=function(j){var k={};d.each(j,function(l,m){if(d.isArray(m)){m=m.join("|")}else{if(typeof m!=="string"){m=""+m}}k[l]=m});return k};return function(n){if(typeof n==="string"){return e({method:arguments[0],params:(arguments.length>=2)?arguments[1]:{}})}var j={sourceId:"default",method:"method_name",params:{},syncMode:"noSync",syncObject:null,success:null,error:null};var m=d.extend({},j,n);if(m.syncMode=="noSync"){if(m.syncObject!==null){throw ("syncObject must stay null if syncMode is 'noSync'")}}else{if((m.syncMode=="receiveLast")||(m.syncMode=="receiveIncrementalFast")){if(m.syncObject===null){throw ("syncObject must be an object if syncMode is other than 'noSync'. Check out the docs!")}}else{throw ("Invalid syncMode: "+m.syncMode)}}var o=null;if(m.syncObject!==null){if(typeof m.syncObject.lastIssuedRequestId==="undefined"){m.syncObject.lastIssuedRequestId=0;m.syncObject.lastReceivedRequestId=0}m.syncObject.lastIssuedRequestId++;o=m.syncObject.lastIssuedRequestId}var l=h.settings.usosAPIs[m.sourceId].methodUrl.replace("%s",m.method);var p=d.extend({},m.params,h.settings.usosAPIs[m.sourceId].extraParams);var k=d.Deferred();d.ajax({type:"POST",url:l,data:i(p),dataType:"json",success:function(r,s,q){if(m.syncObject!==null){if(m.syncObject.lastReceivedRequestId>o){return}if((m.syncMode=="receiveLast")&&o<m.syncObject.lastIssuedRequestId){return}m.syncObject.lastReceivedRequestId=o}if(m.success!==null){m.success(r)}k.resolve(r)},error:function(s,r,q){if(m.syncObject!==null){if(m.syncObject.lastReceivedRequestId>o){return}m.syncObject.lastReceivedRequestId=o}if(m.error!==null){m.error(s,r,q)}k.reject()}});if(m.syncMode=="noSync"){return k.promise()}}}();var f=function(){if(arguments.length==1){if(arguments[0]===null){return f({langdict:{pl:null,en:null}})}else{if(typeof arguments[0].langdict!=="undefined"){}else{if((typeof arguments[0].pl!=="undefined")||(typeof arguments[0].en!=="undefined")){return f({langdict:arguments[0]})}else{if(arguments[0]=="pl"){return h.settings.langpref=="pl"}else{if(arguments[0]=="en"){return h.settings.langpref=="en"}else{d.usosCore._console.warn("$.usosCore.lang called with a single plaintext string!");return arguments[0]}}}}}}else{if(arguments.length==2){return f({langdict:{pl:arguments[0],en:arguments[1]}})}else{if(arguments.length==0){return h.settings.langpref}else{throw ("Invalid arguments")}}}var i={langdict:null,langpref:"inherit",format:"plaintext"};var l=d.extend({},i,arguments[0]);if(l.langpref=="inherit"){l.langpref=h.settings.langpref}var n=l.langdict.pl;var k=l.langdict.en;if(l.format=="plaintext"){var j;if(l.langpref=="pl"){if(n){j=n}else{if(k){j="(po angielsku) "+k}else{j="(brak danych)"}}}else{if(k){j=k}else{if(n){j="(in Polish) "+n}else{j="(unknown)"}}}return j}else{if(l.format=="jQuery"){var m=d("<span>");if(l.langpref=="pl"){if(n){m.html(n)}else{if(k){m.append(d("<span>").addClass("ua-note").text("(po angielsku)")).append(" ").append(d("<span>").html(k))}else{m.append(d("<span>").addClass("ua-note").text("(brak danych)"))}}}else{if(k){m.html(k)}else{if(n){m.append(d("<span>").addClass("ua-note").text("(in Polish)")).append(" ").append(d("<span>").html(n))}else{m.append(d("<span>").addClass("ua-note").text("(unknown)"))}}}return m}else{d.usosCore.error("Unknown format "+l.format+", assuming plaintext.");l.format="plaintext";return f(l)}}};var a=function(){var j=function(l){if(typeof l==="object"){return d.extend(true,{},l)}else{return l}};var k=function(l){var n=[];for(var m=0;m<l.length;m++){n.push(j(l[m]))}return n};var i={};d.each(["log","warn","error","assert"],function(l,m){i[m]=function(){if(window.console&&window.console[m]){Function.prototype.apply.call(window.console[m],window.console,k(arguments))}}});return i}();var c=function(){var k={message:{pl:"Wystąpił niespodziewany błąd.",en:"Unexpected error occured."},adviseRefreshing:null,adviseRepeating:null,adviseCheckingPermissions:null,adviseContactingAdmins:null};var i=d("<div class='ua-paragraphs ua-container'>");i.append(d("<p style='font-size: 120%; margin-bottom: 25px'>").append(d("<b>").html(d.usosCore.lang(k.message))));var j=d("<ul>");i.append(j);if(k.adviseRefreshing!==false){j.append(d("<li>").html(d.usosCore.lang("<p><b>Najpierw spróbuj odświeżyć stronę.</b> Odwieżenie strony często może pomóc, np. jeśli błąd jest spowodowany automatycznym wylogowaniem po dłuższej nieaktywności.</p><p style='font-size: 120%; margin-bottom: 18px'><a>Kliknij tutaj, aby odświeżyć stronę</a></p>","<p><b>First, try to refresh the page.</b> Refreshing can often help, particularly if the error occured due to an automatic user sign-out after a prolonged period of inactivity.</p><p style='font-size: 120%; margin-bottom: 18px'><a>Click here to refresh the page</a></p>")).each(function(){d(this).find("a").addClass("ua-link").click(function(){window.location.reload(true)})}))}if(k.adviseRepeating!==false){j.append(d("<li>").html(d.usosCore.lang("Spróbuj ponownie wykonać akcję, która spowodowała wystąpienie błędu. Być może był to jednorazowy błąd spowodowany chwilową utratą połączenia z Internetem?","Try to repeat the action which you were doing when the error occured. Perhaps it was a one-time network error caused by bad Internet connection?")))}if(k.adviseCheckingPermissions!==false){j.append(d("<li>").html(d.usosCore.lang("Upewnij się, czy posiadasz odpowiednie uprawnienia. Czy jesteś zalogowany? Być może musisz uzyskać pewne dodatkowe uprawnienia, aby móc wyświetlić stronę lub wykonać akcję, którą właśnie próbowałeś wykonać?","Make sure you have proper privileges. Are you signed in? Perhaps, you need to acquire some special privileges before you can view this page or perform this action?")))}if(k.adviseContactingAdmins!==false){j.append(d("<li>").html(d.usosCore.lang("Jeśli problem będzie się powtarzał, to skontaktuj się z administratorem. Napisz na której stronie i w którym momencie problem wystąpuje, tak aby administrator mógł go dokładniej zbadać.","If the problem persists, contact the administrator. Try to include detailed descriptions of where and when the error occurs, so that the administrator will be able to examine it closely.")))}i.append(d("<p style='text-align: center; font-size: 120%; margin-top: 20px'>").html(d("<a class='ua-link'>").html(d.usosCore.lang("Zamknij i kontynuuj","Close and continue")).click(function(){i.dialog("close")})));var l=function(){i.dialog({dialogClass:"ua-panic-dialog",resizable:false,modal:true,width:"600px",height:"auto",closeText:d.usosCore.lang("Zamknij","Close")})};setTimeout(l,2000)};d[b]={_getSettings:function(){return h.settings},_console:a,init:g,usosapiFetch:e,lang:f,panic:c}})(jQuery);(function(c){var b="usosEntity";var a=function(g){var i={};var e=[];var h=function(j,k){i[j]=k;e.push(k)};switch(g){case"entity/users/user":h("user_id",arguments[1]);break;case"entity/fac/faculty":h("fac_id",arguments[1]);break;case"entity/slips/template":h("tpl_id",arguments[1]);break;default:throw"Unknown entity: "+g}var f=c.usosCore._getSettings().entityURLs[g];if(typeof f==="null"){}if(typeof f==="function"){f=f.apply(null,e);if(typeof f!=="string"){f=null}}else{if(typeof f==="string"){c.each(i,function(j,k){f=f.replace("${"+j+"}",k)})}}return f};var d=function(h,g){var j;if(h){j=c("<a>").attr("class","ua-link")}else{j=c("<span>")}var f;var k;var i=g[0];switch(i){case"entity/users/user":k=c.usosUtils.requireFields(g[1],"id|first_name|last_name");j.text(k.first_name+" "+k.last_name);f=a(i,k.id);break;case"entity/fac/faculty":case"entity/slips/template":k=c.usosUtils.requireFields(g[1],"id|name");j.text(k.name);f=a(i,k.id);break;default:throw"Unknown entity: "+i}if(h&&f){j.attr("href",f)}return j};c[b]={label:function(){return d.call(null,false,arguments)},link:function(){return d.call(null,true,arguments)},url:a}})(jQuery);(function(h){var e="usosForms";var g=function(r,q){var p=h("<"+r+" class='ua-widget'>");if(q){p.attr("data-fname",q)}return p};var a=function(q,s,p){var t=q.field_errors;var r=t[s];if(r){p.addClass(e+"-showErr").usosOverlays("showContextMessage",{type:"error",message:h.usosCore.lang(r)});return[s]}else{return[]}};var i={getValue:function(){if(h(this).attr("data-fname")){throw"Named widgets MUST implement getValue!"}else{throw"Calling getValue on an unnamed widget!"}},setValue:function(){if(h(this).attr("data-fname")){throw"Named widgets MUST implement setValue!"}else{throw"Calling setValue on an unnamed widget!"}},getFlatValues:function(){var q=h(this).usosForms("value");if(h.isArray(q)){q=q.join("|")}else{if(q===null){q=""}else{if(typeof q==="boolean"){q=q?"true":"false"}else{if(typeof q!=="string"){throw"Internal error. Invalid flatValue."}}}}var p={};p[h(this).attr("data-fname")]=q;return p},showErrors:function(p){if(h(this).attr("data-fname")){return a(p,h(this).attr("data-fname"),h(this))}else{throw"Calling showErrors on an unnamed widget!"}}};var j={_customWidget:function(p,q){return g("div",p).data(e,h.extend({},i,q))},label:function(){var p=function(){return h(this).find("div").text()};var r=function(s){h(this).find("div").text(s)};var q=function(s){return a(s,h(this).attr("data-fname"),h(this).find("span"))};return function(t){var s=h("<div>").css("width","auto").css("max-width","300px");return g("div",t).append(s).data(e,h.extend({},i,{getValue:p,setValue:r,showErrors:q}))}}(),textbox:function(){var p=function(){var s=h(this).find("input, textarea");return s.val()};var r=function(s){h(this).find("input, textarea").val(s)};var q=function(s){return a(s,h(this).attr("data-fname"),h(this).find("input, textarea"))};return function(s){if(typeof s==="string"){s={name:s}}var t=h.extend({},{name:null,placeholder:null,multiline:false},s);var v;var u;if(!t.multiline){v=h("<input type='text' class='ua-form'>");u=300}else{v=h("<textarea class='ua-form'>");u=450}v.css("width",(u-9)+"px");if(t.placeholder){v.attr("placeholder",h.usosCore.lang(t.placeholder))}return g("div",t.name).append(v).data(e,h.extend({},i,{getValue:p,setValue:r,showErrors:q}))}}(),checkbox:function(){var p=function(){return h(this).find("input").prop("checked")};var r=function(s){h(this).find("input").prop("checked",s)};var q=function(s){return a(s,h(this).attr("data-fname"),h(this).find("label"))};return function(u,t){var s;if(t instanceof h){s=t}else{s=h("<span>").html(" "+h.usosCore.lang(t))}return g("div",u).append(h("<label>").append(h("<table class='ua-checkbox'>").append(h("<tr>").append(h("<td>").append(h("<input type='checkbox'>"))).append(h("<td>").append(s))))).data(e,h.extend({},i,{getValue:p,setValue:r,showErrors:q}))}}(),langdictbox:function(){var p=function(){var v=h(this).find(".ua-lang-PL").closest(".ua-widget");var u=h(this).find(".ua-lang-EN").closest(".ua-widget");return{pl:v.usosForms("value"),en:u.usosForms("value")}};var s=function(u){h(this).find(".ua-lang-PL").closest(".ua-widget").usosForms("value",u.pl);h(this).find(".ua-lang-EN").closest(".ua-widget").usosForms("value",u.en)};var t=function(){var w=h(this).usosForms("value");var u={};var v=h(this).attr("data-fname");u[v+"_pl"]=w.pl;u[v+"_en"]=w.en;return u};var r=function(z){var y=h(this).find(".ua-lang-PL").closest(".ua-widget");var x=h(this).find(".ua-lang-EN").closest(".ua-widget");var w=h(this).attr("data-fname");var v=a(z,w+"_pl",y.find("input, textarea"));var u=a(z,w+"_en",x.find("input, textarea"));h.merge(v,u);return v};var q=function(x,u){var w;if(x=="PL"){w={pl:"Po polsku",en:"In Polish"}}else{w={pl:"Po angielsku",en:"In English"}}var v=h.usosForms.textbox({name:null,placeholder:w,multiline:u});v.find("input, textarea").css("position","relative").css("z-index","1");v.css("position","relative").prepend(h("<div class='ua-form-textbox-icon'>").addClass("ua-lang-"+x));return v};return function(w){if(typeof w==="string"){w={name:w}}var y=h.extend({},{name:null,multiline:false},w);var x=q("PL",y.multiline);var v=q("EN",y.multiline);var u=g("div",y.name).append(x).append(v.css("margin-top","5px")).data(e,h.extend({},i,{getValue:p,setValue:s,getFlatValues:t,showErrors:r}));x.add(v).find("input, textarea").focus(function(){x.find(".ua-form-textbox-icon").stop(true).delay(100).animate({left:-13},150,"easeOutCubic");v.find(".ua-form-textbox-icon").stop(true).delay(180).animate({left:-13},150,"easeOutCubic")}).blur(function(){x.find(".ua-form-textbox-icon").stop(true).delay(100).animate({left:-2},150,"easeOutCubic");v.find(".ua-form-textbox-icon").stop(true).delay(180).animate({left:-2},150,"easeOutCubic")});return u}}(),tr:function(){var p=function(q){var r=h("<td>");if(q){r.append(h.usosTip.create({content:q}))}return r};return function(q){var r=h.extend({},{tip:null,title:null,content:null},q);return g("tr").append(p(r.tip)).append(h("<td class='ua-strong'>").css("text-align","right").html(r.title!==null?h.usosCore.lang(r.title)+":":"")).append(h("<td>").html(r.content))}}(),hr:function(){return g("hr").addClass("ua-hr")},selectbox:function(){var q=function(){return h(this).find("select").val()};var t=function(u){h(this).find("select").val(u)};var s=function(v){var u=h(this).find("select");h.each(v,function(x,w){u.append(h("<option>").attr("value",x).text(h.usosCore.lang(w)))})};var p=function(u){h(this).find("select").empty();h(this).usosForms("widgetCall","addOptions",u)};var r=function(u){return a(u,h(this).attr("data-fname"),h(this).find("select"))};return function(v,u){var w=g("div",v).append(h("<select class='ua-form'>").css("width","300px")).data(e,h.extend({},i,{getValue:q,setValue:t,replaceOptions:p,addOptions:s,showErrors:r}));w.usosForms("widgetCall","replaceOptions",u);return w}}()};var b=function(p){return p.find(".ua-widget[data-fname]").addBack().filter(".ua-widget[data-fname]")};var l=function(){h(this).find("."+e+"-showErr").removeClass(e+"-showErr").usosOverlays("hideContextMessage")};var o=function(){return this.each(function(p){if(p!==0){h(this).prepend(h.usosForms.hr())}})};var k=function(){var p=(arguments.length>0)?arguments[0]:undefined;var q=null;var r=this.each(function(){if(p===undefined){q=h(this).data(e).getValue.apply(this);return false}else{h(this).data(e).setValue.apply(this,[p])}});if(p===undefined){return q}else{return r}};var m=function(){var q=this;var p=arguments.length>0?arguments[0]:undefined;if(p===undefined){var r={};b(q).each(function(){r[h(this).attr("data-fname")]=h(this).usosForms("value")});return r}else{h.each(p,function(s,t){var u=b(q).filter("[data-fname="+s+"]");if(u.length===0){h.usosCore._console.log("Could not find a widget named '"+s+"'")}u.each(function(){h(this).usosForms("value",t)})})}};var c=function(){var p=function(r){var s=r.data(e);if(!s.getFlatValues){throw"Missing methods in widget's data!"}var q=s.getFlatValues.apply(r);return q};return function(){var q={};this.each(function(){var s=h(this);var r=b(s);r.each(function(){var t=h(this);h.each(p(t),function(u,v){q[u]=v})})});return q}}();var f=function(q){var p=null;var r=Array.prototype.slice.call(arguments,1);this.each(function(){var s=h(this);if(s.hasClass("ua-widget")){p=s.data(e)[q].apply(this,r)}else{h.usosCore._console.error("Calling widgetCall on a non-widget!")}return false});return p};var n=function(s){var t=h.extend({},{response:null,form:null},s);var r=h.extend({},t.response.field_errors);if(t.form){b(t.form).each(function(){var u=h(this).data(e).showErrors.apply(this,[t.response]);h.each(u,function(v,w){delete r[w]})})}var q=0;h.each(r,function(){q++});if(q===0){return}var p=h("<div class='ua-paragraphs ua-container'>");p.append(h("<p style='font-size: 120%; margin-bottom: 15px'>").append(h("<b>").html(h.usosCore.lang("Zmiany nie mogły zostać zapisane.","Unable to save changes."))));$ul=h("<ul>");p.append($ul);h.each(r,function(v,u){$ul.append(h("<li>").html(h.usosCore.lang(u)))});p.append(h("<p style='text-align: center; font-size: 120%; margin-top: 20px'>").html(h("<a class='ua-link'>").html(h.usosCore.lang("Zamknij","Close")).click(function(){p.dialog("close")})));p.dialog({dialogClass:"ua-panic-dialog",resizable:false,modal:true,width:"500px",height:"auto",closeText:h.usosCore.lang("Zamknij","Close")})};h.usosForms=h.extend({},{showErrors:n},j);var d={hrs:o,value:k,values:m,flatValues:c,hideErrors:l,widgetCall:f};h.fn[e]=function(p){if(d[p]){return d[p].apply(this,Array.prototype.slice.call(arguments,1))}else{h.error("Method "+p+" does not exist on jQuery."+e)}}})(jQuery);(function(d){var j="usosOverlays.contextMessage";var i="usosOverlays.progress";var e=false;var g=function(m){var o=d(window).scrollTop();var n=o+d(window).height();var k=d(m).offset().top;var l=k+d(m).height();return((l<=n)&&(k>=o))};var f=function(k){return this.each(function(){var l=d(this);if(l.data(j)){l.usosOverlays("hideContextMessage",function(){l.usosOverlays("showContextMessage",k)});return}var m={};m.settings=d.extend({},{type:null,message:null,scrollToBeVisible:true},k);if(m.settings.type!=="error"){d.usosCore._console.error("Message type must equal 'error'.");return}if(m.settings.message===null){d.usosCore._console.error("Message parameter is missing.");return}l.data(j,m);m.$error=d("<div>").addClass("ua-container").addClass("ua-form-error").css("opacity",".1").text(m.settings.message);d("body").append(m.$error);m.$error.position({my:"center-20 bottom-3",at:"right top",of:l,using:function(n,o){d(this).css(n);d("<div>").addClass("ua-form-error-arrow").addClass(o.vertical).addClass(o.horizontal).appendTo(this)}});m.$error.click(function(){var n=l.find("input:visible, select:visible, textarea:visible");if(n.length===0){l.trigger("focus")}else{if(n.length==1){n.trigger("focus")}else{l.usosOverlays("hideContextMessage")}}});l.find("input:visible, select:visible, textarea:visible").addBack().on("focus."+j+" keypress."+j+" change."+j,function(){l.usosOverlays("hideContextMessage")});m.$error.fadeTo("fast",1);if(m.settings.scrollToBeVisible&&(!g(m.$error))&&(!e)){e=true;d("html, body").animate({scrollTop:m.$error.offset().top-30},500,function(){e=false})}})};var a=function(k){return this.each(function(){var l=d(this);var m=l.data(j);if(!m){return}m.$error.unbind();l.unbind("."+j);l.removeData(j);m.$error.fadeTo("fast",0,function(){m.$error.remove();if(k){k()}})})};var h=function(l){var k=0;l.parents().each(function(){var m=parseInt(d(this).css("zIndex"),10);if(m>k){k=m}});return k};var c=function(k){return this.each(function(){var n=d(this);var p=n.data(i);if(!p){p={};n.data(i,p);p.settings={state:"loading",delay:300,opacity:0.8,fadeDuration:300}}if(typeof k!=="object"){k={state:k}}d.extend(p.settings,k);if(p.settings.state=="hide"){if(p.$bg){p.$bg.remove();p.$fg.remove();n.removeData(i)}return}if(!p.$bg){p.$bg=d("<div>").addClass("ua-progressoverlay-background").hide();d(document.body).append(p.$bg);p.$fg=d("<table>").addClass("ua-progressoverlay-foreground").hide().append(d("<tr>").append(d("<td>")));d(document.body).append(p.$fg)}var m=p.$bg;var l=p.$fg;l.find("td").empty();m.add(l).css("z-index",h(n)).css("left",n.offset().left).css("top",n.offset().top).css("width",n.outerWidth()).css("height",n.outerHeight()).css("opacity",p.settings.opacity).delay(p.settings.delay).each(function(){if(d("body").has(d(this)).length>0){d(this).fadeIn(p.settings.fadeDuration)}});var o;switch(p.settings.state){case"loading":o=d.usosCore.lang("Wczytywanie...","Loading...");break;case"saving":o=d.usosCore.lang("Zapisywanie...","Saving...");break;case"hide":throw ("Should return eariler!");default:throw ("Unknown state: "+p.settings.state)}l.find("td").append(d("<span>").attr("class","ua-loading").attr("title",o));l.delay(p.settings.delay+(p.settings.fadeDuration/2)).each(function(){if(!d.contains(document.documentElement,m[0])){return}l.fadeIn(p.settings.fadeDuration)})})};var b={showContextMessage:f,hideContextMessage:a,progressIndicator:c};d.fn.usosOverlays=function(k){if(b[k]){return b[k].apply(this,Array.prototype.slice.call(arguments,1))}else{d.error("Method "+k+" does not exist.")}}})(jQuery);(function(d){var p="usosSelector";var a=null;var e=function(u,v){g();a=setTimeout(function(){a=null;v()},u*1000)};var g=function(){if(a){clearTimeout(a);a=null}};var q=function(){return 0.25};var j=function(u){u.$root.addClass("ua-filled")};var c=function(u){u.$root.removeClass("ua-filled")};var m=function(v,u){return JSON.stringify(v)==JSON.stringify(u)};var r=function(){var w=d(this);var x=w.data(p);x.knownItems={};w.empty().addClass("ua-container ua-selector").css("width",x.settings.width).append(d("<textarea>").attr("rows","1").css("width",x.settings.width));x.suggestionsSyncObject={};x.previousValue=x.settings.multi?[]:null;x.$root=w;x.$textarea=w.find("textarea");var u=x.$root.offset().top;var v=d(document).height()-x.$root.offset().top-x.$root.height();x.$textarea.textext({plugins:"autocomplete tags focus prompt",prompt:x.settings.prompt,autocomplete:{dropdown:{maxHeight:"200px",position:(v>200)?"below":((u>v)?"above":"below")},render:function(z){var y=d("<span>").html(x.settings.suggestionRenderer(x.knownItems[z]));y.find("*").addBack().addClass("text-label");return y}},ext:{tags:{renderTag:function(y){var z=d(this.opts("html.tag"));z.find(".text-label").html(x.settings.tagRenderer(x.knownItems[y]));z.data(p,x.knownItems[y]);z.data("text-tag",y);return z}}}}).bind("getSuggestions",function(B,A){var C=d(this);var y=d(B.target).textext()[0];var z=(A?A.query:"")||"";e(q(),function(){d.usosCore.usosapiFetch({sourceId:x.settings.sourceId,method:x.settings.search.method,params:x.settings.search.paramsProvider(z),syncMode:"receiveIncrementalFast",syncObject:x.suggestionsSyncObject,success:function(E){var D=[];d.each(x.settings.search.itemsExtractor(E),function(F,G){var H=x.settings.idExtractor(G);x.knownItems[H]=G;D.push(H)});C.trigger("setSuggestions",{result:D})},error:function(F,E,D){x.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.lang("Nie udało się wczytać listy sugestii. Spróbuj odświeżyć stronę (F5).","Could not load the list of suggestions. Try to refresh tha page (F5).")})}})})}).bind("isTagAllowed",function(A,z){if(!x.knownItems[z.tag]){x.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.lang("Przed wciśnięciem Enter należy poczekać na załadowanie listy sugestii.","Before pressing Enter, you should wait until the suggestions show up.")});z.result=false;return}var y=l(x);if((!x.settings.multi)&&(y.length>0)){b(x,[]);return}if(x.settings.multi&&d.inArray(z.tag,y)>=0){x.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.lang("Ta pozycja już znajduje się na liście.","This item is already on the list.")});z.result=false;return}}).bind("setFormData",function(){var y=x.$root.usosSelector("value");if(!x.settings.multi){if(y===null){c(x)}else{j(x)}}if(!m(y,x.previousValue)){x.previousValue=y;x.$root.trigger("change")}});if(x.settings.value){x.$root.usosSelector("value",x.settings.value)}};var f=function(u){return{prompt:d.usosCore.lang("Wpisz imię i nazwisko","Enter the user's name"),search:{method:"services/users/search",paramsProvider:function(v){return{name:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/users/users",paramsProvider:function(v){return{user_ids:v.join("|"),fields:"id|first_name|last_name"}},itemsExtractor:function(w){var v=[];d.each(w,function(x,y){if(y===null){d.usosCore._console.warn("User "+x+" not found! Will be skipped!");return true}v.push(y)});return v}},idExtractor:function(v){return v.user_id||v.id},suggestionRenderer:function(w){var v=d("<div>");v.append(d("<span>").html(w.match));d.each(w.active_employment_functions,function(x,y){v.append(" ").append(d("<span class='ua-note'>").text("- "+d.usosCore.lang(y["function"])+" ("+d.usosCore.lang(y.faculty.name)+")"))});d.each(w.active_student_programmes,function(x,y){v.append(" ").append(d("<span class='ua-note'>").text("- "+d.usosCore.lang(y.programme.description)))});return v},tagRenderer:function(v){if(v.match){return d("<span>").html(v.match).text()}else{return v.first_name+" "+v.last_name}}}};var i=function(u){return{prompt:d.usosCore.lang("Wpisz nazwę przedmiotu","Enter a course name"),search:{method:"services/courses/search",paramsProvider:function(v){return{lang:d.usosCore.lang(),name:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/courses/courses",paramsProvider:function(v){return{course_ids:v.join("|"),fields:"id|name"}},itemsExtractor:function(w){var v=[];d.each(w,function(y,x){if(x===null){d.usosCore._console.warn("Course "+y+" not found! Will be skipped!");return true}v.push(x)});return v}},idExtractor:function(v){return v.course_id||v.id},suggestionRenderer:function(v){return v.match},tagRenderer:function(x){var v;if(x.match){v=d("<span>").html(x.match).text();var w=v.indexOf(" ("+x.course_id+")");if(w>0){v=v.substring(0,w)}}else{v=d.usosCore.lang(x.name)}return d("<span>").text(v).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"180px","text-overflow":"ellipsis"})}}};var n=function(u){return{prompt:d.usosCore.lang("Wpisz nazwę jednostki","Enter a faculty name"),search:{method:"services/fac/search",paramsProvider:function(v){return{lang:d.usosCore.lang(),fields:"id|match|name",query:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/fac/faculties",paramsProvider:function(v){return{fac_ids:v.join("|"),fields:"id|name"}},itemsExtractor:function(w){var v=[];d.each(w,function(x,y){if(y===null){d.usosCore._console.warn("Faculty "+x+" not found! Will be skipped!");return true}v.push(y)});return v}},idExtractor:function(v){return v.fac_id||v.id},suggestionRenderer:function(v){return v.match},tagRenderer:function(w){var v=d.usosCore.lang(w.name);return d("<span>").text(v).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"250px","text-overflow":"ellipsis"})}}};var k=function(u){return{prompt:d.usosCore.lang("Wpisz nazwę szablonu obiegówki","Enter a slip template name"),search:{method:"services/slips/search_templates",paramsProvider:function(v){return{langpref:d.usosCore.lang(),fields:"id|match|name|state",query:v}},itemsExtractor:function(v){return v.items}},get:{method:"services/slips/templates",paramsProvider:function(v){return{tpl_ids:v.join("|"),fields:"id|name"}},itemsExtractor:function(w){var v=[];d.each(w,function(y,x){if(x===null){d.usosCore._console.warn("Template "+y+" not found! Will be skipped!");return true}v.push(x)});return v}},idExtractor:function(v){return v.id},suggestionRenderer:function(w){var v=d("<div>");v.append(d("<span>").html(w.match));if(w.state!="active"){v.append(" ").append(d("<span class='ua-note'>").text(w.state=="draft"?d.usosCore.lang("(kopia robocza)","(draft)"):d.usosCore.lang("(przestarzały)","(obsolete)")))}return v},tagRenderer:function(v){return d("<span>").text(v.name).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"250px","text-overflow":"ellipsis"}).click(function(){var w=d.usosEntity.url("entity/slips/template",v.id);if(!w){return}var x=d.usosCore.lang('Przejść do strony szablonu "'+v.name+'"?','Go to the "'+v.name+'" template page?');if(confirm(x)){document.location=w}})}}};var o=function(u){return this.each(function(){var v=d(this);if(v.data(p)){v.usosSelector("destroy")}var w={};v.data(p,w);w.settings=d.extend({},{entity:null,sourceId:"default",width:"300px",multi:false,value:null},u);if(w.settings.entity=="user"){d.extend(w.settings,f(w.settings))}else{if(w.settings.entity=="course"){d.extend(w.settings,i(w.settings))}else{if(w.settings.entity=="faculty"){d.extend(w.settings,n(w.settings))}else{if(w.settings.entity=="slip_template"){d.extend(w.settings,k(w.settings))}else{throw ("Unknown entity: "+w.settings.entity)}}}}r.apply(this)})};var l=function(v){var u=[];d.each(v.$textarea.textext()[0].tags().tagElements(),function(w,x){u.push(v.settings.idExtractor(d(x).data(p)))});return u};var b=function(y,v){var x=y.$textarea.prop("disabled");y.$textarea.prop("disabled",true);var u=function(){d.each(l(y),function(A,B){y.$textarea.textext()[0].tags().removeTag(B)});var z=v.filter(function(A){return typeof y.knownItems[A]!=="undefined"});y.$textarea.textext()[0].tags().addTags(z);y.$textarea.prop("disabled",x);if(z.length<v.length){y.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.lang("Wystąpił błąd podczas wczytywania wartości tego pola. Sprawdź, czy pole zawiera pożądaną wartość. Jeśli problem będzie się powtarzał, proszę skontaktować się z administratorem.","Error occured while loading values for this form field. Check if the field has the proper value. If this problem persists, please contact the administrator.")})}};var w=v.filter(function(z){return typeof y.knownItems[z]==="undefined"});if(w.length>0){y.$root.usosOverlays("progressIndicator",{state:"loading"});d.usosCore.usosapiFetch({sourceId:y.settings.sourceId,method:y.settings.get.method,params:y.settings.get.paramsProvider(w),success:function(z){y.$root.usosOverlays("progressIndicator","hide");d.each(y.settings.get.itemsExtractor(z),function(A,B){var C=y.settings.idExtractor(B);y.knownItems[C]=B});u()},error:function(B,A,z){y.$textarea.usosOverlays("showContextMessage",{type:"error",message:d.usosCore.lang("Wystąpił błąd podczas wczytywania wartości tego pola. Spróbuj odświeżyć stronę (F5).","Error occured while loading values for this form field. Try to refresh the page (F5).")})}})}else{u()}};var t=function(v){var u=(typeof v==="undefined")?null:this;this.each(function(){var x=d(this);var y=x.data(p);if(typeof v==="undefined"){var w=l(y);if(y.settings.multi){u=w}else{if(w.length===0){u=null}else{u=w[0]}}return false}if(y.settings.multi){b(y,v)}else{if(v===null){b(y,[])}else{b(y,[v])}}});return u};var s=function(){return this.each(function(){var u=d(this);var v=u.data(p);v.$root.find("*").addBack().unbind();v.$root.remove();u.removeData(p)})};var h={init:o,value:t,destroy:s};d.fn.usosSelector=function(u){if(h[u]){return h[u].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof u==="object")||(!u)){return o.apply(this,arguments)}else{d.error("Method "+u+" does not exist on jQuery."+p)}}}})(jQuery);(function(d){var c="usosTip";var a=function(i){var g;if(i instanceof d){g=i}else{if(i.pl||i.en){g=d.usosCore.lang({langdict:i,format:"jQuery"})}else{g=d("<span>").html(i)}}var f=g.text().length;var h;if(f<30){h="auto"}else{if(f<300){h="300px"}else{if(f<1200){var j=1-((1200-f)/900);h=(300+300*j)+"px"}else{h="600px"}}}return d("<div>").append(g).css("max-width",h)};var e=function(f){return d("<div>").append(f).html()};var b=function(g){var i=d("<div class='ua-tip'><div/></div>");var j={};i.data(c,j);j.settings=d.extend({},{content:null,position:"top"},g);var h=null;var f=null;if(typeof j.settings.content==="function"){h=d.usosCore.lang("Wczytywanie...","Loading...");f=j.settings.content}else{h=a(j.settings.content)}j.$img=i.find("div");j.$img.tooltipster({content:e(h),delay:f?200:0,speed:0,position:j.settings.position,theme:"ua-tooltip ua-tooltip-info",functionReady:function(){if(f===null){return}var k=f.apply(i);f=null;k.done(function(m){var l=a(m);j.$img.tooltipster("update",e(l))}).fail(function(){var l=d("<div>").text(d.usosCore.lang("Nie udało się załadować treści podpowiedzi. Odśwież stronę i spróbuj ponownie.","Could not load the content of the tip. Refresh the page and try again."));l.css("max-width","200px");j.$img.tooltipster("update",e(l))})}}).attr("tabindex",0).focus(function(){d(this).tooltipster("show")}).blur(function(){d(this).tooltipster("hide")});return i};d.usosTip={create:b}})(jQuery);(function(c){var b="usosUtils";var d=function(){var e=function(i,h){var g=i;c.each(h,function(j,k){g=g[k];if(typeof g==="undefined"){return g}});return g};var f=function(k,j,i){var h=k;var g=j.length-1;c.each(j,function(l,m){if(l==g){h[m]=i}else{if(typeof h[m]==="undefined"){h[m]={}}h=h[m]}})};return function(h,j){var g={};var o=[];var n="";var p=j+"$";for(var k=0;k<p.length;k++){var l=p.charAt(k);if(l=="["||l=="]"||l=="|"||l=="$"){o.push(n);var m=null;if(n!==""){m=e(h,o);if(typeof m==="undefined"){c.usosCore._console.error("Required field "+o.join(".")+" not found.")}}if(l=="["){}else{if(l=="|"||l=="$"){if(n!==""){f(g,o,m)}o.pop()}else{if(l=="]"){if(n!==""){f(g,o,m)}o.pop();o.pop()}}}n=""}else{n+=l}}return g}}();var a=function(g){var f=g.split(/[\r\n]{2,}/);var e=c("<div>");c.each(f,function(h,i){e.append(c("<p>").text(i))});return e.children()};c[b]={requireFields:d,makeParagraphs:a}})(jQuery);