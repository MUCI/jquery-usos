/*!
 * jQuery-USOS 1.2 *BUNDLE VERSION* -- this file includes all jQuery-USOS
 * JavaScript dependencies except jQuery and jQuery-UI.
 */
;
/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,q){var j,n=Array.prototype.slice,s=decodeURIComponent,a=$.param,c,m,x,b=$.bbq=$.bbq||{},r,w,k,e=$.event.special,d="hashchange",C="querystring",F="fragment",A="elemUrlAttr",g="location",l="href",u="src",z=/^.*\?|#.*$/g,y=/^.*\#/,h,E={};function G(H){return typeof H==="string"}function D(I){var H=n.call(arguments,1);return function(){return I.apply(this,H.concat(n.call(arguments)))}}function o(H){return H.replace(/^[^#]*#?(.*)$/,"$1")}function p(H){return H.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(J,O,H,K,I){var Q,N,M,P,L;if(K!==j){M=H.match(J?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);L=M[3]||"";if(I===2&&G(K)){N=K.replace(J?y:z,"")}else{P=m(M[2]);K=G(K)?m[J?F:C](K):K;N=I===2?K:I===1?$.extend({},K,P):$.extend({},P,K);N=a(N);if(J){N=N.replace(h,s)}}Q=M[1]+(J?"#":N||!M[1]?"?":"")+N+L}else{Q=O(H!==j?H:q[g][l])}return Q}a[C]=D(f,0,p);a[F]=c=D(f,1,o);c.noEscape=function(I){I=I||"";var H=$.map(I.split(""),encodeURIComponent);h=new RegExp(H.join("|"),"g")};c.noEscape(",/");$.deparam=m=function(K,H){var J={},I={"true":!0,"false":!1,"null":null};$.each(K.replace(/\+/g," ").split("&"),function(N,S){var M=S.split("="),R=s(M[0]),L,Q=J,O=0,T=R.split("]["),P=T.length-1;if(/\[/.test(T[0])&&/\]$/.test(T[P])){T[P]=T[P].replace(/\]$/,"");T=T.shift().split("[").concat(T);P=T.length-1}else{P=0}if(M.length===2){L=s(M[1]);if(H){L=L&&!isNaN(L)?+L:L==="undefined"?j:I[L]!==j?I[L]:L}if(P){for(;O<=P;O++){R=T[O]===""?Q.length:T[O];Q=Q[R]=O<P?Q[R]||(T[O+1]&&isNaN(T[O+1])?{}:[]):L}}else{if($.isArray(J[R])){J[R].push(L)}else{if(J[R]!==j){J[R]=[J[R],L]}else{J[R]=L}}}}else{if(R){J[R]=H?j:""}}});return J};function B(J,H,I){if(H===j||typeof H==="boolean"){I=H;H=a[J?F:C]()}else{H=G(H)?H.replace(J?y:z,""):H}return m(H,I)}m[C]=D(B,0);m[F]=x=D(B,1);$[A]||($[A]=function(H){return $.extend(E,H)})({a:l,base:l,iframe:u,img:u,input:u,form:"action",link:l,script:u});k=$[A];function t(K,I,J,H){if(!G(J)&&typeof J!=="object"){H=J;J=I;I=j}return this.each(function(){var N=$(this),L=I||k()[(this.nodeName||"").toLowerCase()]||"",M=L&&N.attr(L)||"";N.attr(L,a[K](M,J,H))})}$.fn[C]=D(t,C);$.fn[F]=D(t,F);b.pushState=r=function(K,H){if(G(K)&&/^#/.test(K)&&H===j){H=2}var J=K!==j,I=c(q[g][l],J?K:{},J?H:2);q[g][l]=I+(/#/.test(I)?"":"#")};b.getState=w=function(H,I){return H===j||typeof H==="boolean"?x(H):x(I)[H]};b.removeState=function(H){var I={};if(H!==j){I=w();$.each($.isArray(H)?H:arguments,function(K,J){delete I[J]})}r(I,2)};e[d]=$.extend(e[d],{add:function(H){var J;function I(L){var K=L[F]=c();L.getState=function(M,N){return M===j||typeof M==="boolean"?m(K,M):m(K,N)[M]};J.apply(this,arguments)}if($.isFunction(H)){J=H;return I}else{J=H.handler;H.handler=I}}})})(jQuery,this);
/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,j,b){var k,l=$.event.special,c="location",d="hashchange",m="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in j&&!h;function a(n){n=n||j[c][m];return n.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;l[d]=$.extend(l[d],{setup:function(){if(e){return false}$(k.start)},teardown:function(){if(e){return false}$(k.stop)}});k=(function(){var n={},s,o,p,r;function q(){p=r=function(t){return t};if(h){o=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;r=function(){return a(o.document[c][m])};p=function(w,t){if(w!==t){var u=o.document;u.open().close();u[c].hash="#"+w}};p(a())}}n.start=function(){if(s){return}var u=a();p||q();(function t(){var x=a(),w=r(u);if(x!==u){p(u=x,w);$(j).trigger(d)}else{if(w!==u){j[c][m]=j[c][m].replace(/#.*/,"")+"#"+w}}s=setTimeout(t,$[d+"Delay"])})()};n.stop=function(){if(!o){s&&clearTimeout(s);s=0}};return n})()})(jQuery,this);(function(aI){function aB(a){var h=aI(this).data(ar),g=aw[h.t],f=g.g[h.i];f.ox=a.pageX;f.l=f[Z]()[aa];aA[ae](ad+ar,aD)[ae](ac+ar,aC);S[ai](ak+"*{cursor:"+g.opt.dragCursor+X+Y);f[ag](g.opt.draggingClass);ax=f;if(g.c[h.i].l){for(a=0;a<g.ln;a++){h=g.c[a],h.l=az,h.w=h[an]()}}return az}function aC(a){aA.unbind(ad+ar).unbind(ac+ar);aI("head :last-child").remove();if(ax){ax[ah](ax.t.opt.draggingClass);var d=ax.t,c=d.opt.onResize;ax.x&&(aE(d,ax.i,1),aF(d),c&&(a[ab]=d[0],c(a)));d.p&&T&&aG(d);ax=ay}}function aD(e){if(ax){var d=ax.t,n=e.pageX-ax.ox+ax.l,m=d.opt.minWidth,l=ax.i,k=1.5*d.cs+m+d.b,j=l==d.ln-1?d.w-k:d.g[l+1][Z]()[aa]-d.cs-m,m=l?d.g[l-1][Z]()[aa]+d.cs+m:k,n=ap.max(m,ap.min(j,n));ax.x=n;ax.css(aa,n+at);if(d.opt.liveDrag&&(aE(d,l),aF(d),n=d.opt.onDrag)){e[ab]=d[0],n(e)}}return az}function aE(j,h,o){var n=ax.x-ax.l,m=j.c[h],l=j.c[h+1],k=m.w+n,n=l.w-n;m[an](k+at);l[an](n+at);j.cg.eq(h)[an](k+at);j.cg.eq(h+1)[an](n+at);if(o){m.w=k,l.w=n}}function aF(e){e.gc[an](e.w);for(var d=0;d<e.ln;d++){var f=e.c[d];e.g[d].css({left:f.offset().left-e.offset()[aa]+f.outerWidth()+e.cs/2+at,height:e.opt.headerOnly?e.c[0].outerHeight():e.outerHeight()})}}function aG(h,g){var m,l=0,k=0,j=[];if(g){if(h.cg[af](an),h.opt.flush){T[h.id]=""}else{for(m=T[h.id].split(";");k<h.ln;k++){j[aj](100*m[k]/m[h.ln]+"%"),g.eq(k).css(an,j[k])}for(k=0;k<h.ln;k++){h.cg.eq(k).css(an,j[k])}}}else{T[h.id]="";for(k in h.c){m=h.c[k][an](),T[h.id]+=m+";",l+=m}T[h.id]+=l}}function aH(a){var p=">thead>tr>",o='"></div>',n=">tbody>tr:first>",m=">tr:first>",h="td",d="th",c=a.find(p+d+","+p+h);c.length||(c=a.find(n+d+","+m+d+","+n+h+","+m+h));a.cg=a.find("col");a.ln=c.length;a.p&&T&&T[a.id]&&aG(a,c);c.each(function(g){var f=aI(this),b=aI(a.gc[ai](al+"CRG"+o)[0].lastChild);b.t=a;b.i=g;b.c=f;f.w=f[an]();a.g[aj](b);a.c[aj](f);f[an](f.w)[af](an);if(g<a.ln-1){b.mousedown(aB)[ai](a.opt.gripInnerHtml)[ai](al+ar+'" style="cursor:'+a.opt.hoverCursor+o)}else{b[ag]("CRL")[ah]("CRG")}b.data(ar,{i:g,t:a[am](au)})});a.cg[af](an);aF(a);a.find("td, th").not(c).not(U+"th, table td").each(function(){aI(this)[af](an)})}var aA=aI(document),az=!1,ay=null,ax=ay,aw=[],av=0,au="id",at="px",ar="CRZ",aq=parseInt,ap=Math,ao=aI.browser.msie,an="width",am="attr",al='<div class="',ak="<style type='text/css'>",aj="push",ai="append",ah="removeClass",ag="addClass",af="removeAttr",ae="bind",ad="mousemove.",ac="mouseup.",ab="currentTarget",aa="left",Z="position",Y="}</style>",X="!important;",W=":0px"+X,V="resize",U="table",T,S=aI("head")[ai](ak+".CRC{height:0px;"+Z+":relative;}.CRG{margin-left:-5px;"+Z+":absolute;z-index:5;}.CRG .CRZ{"+Z+":absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;top:0px}.CRL{"+Z+":absolute;width:1px}.CRD{ border-left:1px dotted black"+Y);try{T=sessionStorage}catch(R){}aI(window)[ae](V+"."+ar,function(){for(e in aw){var e=aw[e],d,f=0;e[ah](ar);if(e.w!=e[an]()){e.w=e[an]();for(d=0;d<e.ln;d++){f+=e.c[d].w}for(d=0;d<e.ln;d++){e.c[d].css(an,ap.round(1000*e.c[d].w/f)/10+"%").l=1}}aF(e[ag](ar))}});aI.fn.extend({colResizable:function(a){a=aI.extend({draggingClass:"CRD",gripInnerHtml:"",liveDrag:az,minWidth:15,headerOnly:az,hoverCursor:"e-"+V,dragCursor:"e-"+V,postbackSafe:az,flush:az,marginLeft:ay,marginRight:ay,disable:az,onDrag:ay,onResize:ay},a);return this.each(function(){var g=a,c=aI(this);if(g.disable){if(c=c[am](au),(g=aw[c])&&g.is(U)){g[ah](ar).gc.remove(),delete aw[c]}}else{var b=c.id=c[am](au)||ar+av++;c.p=g.postbackSafe;if(c.is(U)&&!aw[b]){c[ag](ar)[am](au,b).before(al+'CRC"/>'),c.opt=g,c.g=[],c.c=[],c.w=c[an](),c.gc=c.prev(),g.marginLeft&&c.gc.css("marginLeft",g.marginLeft),g.marginRight&&c.gc.css("marginRight",g.marginRight),c.cs=aq(ao?this.cellSpacing||this.currentStyle.borderSpacing:c.css("border-spacing"))||2,c.b=aq(ao?this.border||this.currentStyle.borderLeftWidth:c.css("border-"+aa+"-"+an))||1,aw[b]=c,aH(c)}}})}})})(jQuery);(function(e,j){function k(){}function D(){}function n(){}var w=(JSON||{}).stringify,s=Array.prototype.slice,q,E="undefined",b="item.manager",d="plugins",A="ext",z="html.wrap",t="html.hidden",C="keys",u="preInvalidate",x="postInvalidate",m="getFormData",o="setFormData",y="setInputData",r="postInit",c="ready",a={itemManager:D,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!w){throw new Error("JSON.stringify() not found")}function h(H,G){if(typeof(G)==="string"){G=G.split(".")}var I=G.join(".").replace(/\.(\w)/g,function(J,K){return K.toUpperCase()}),F=G.shift(),p;if(typeof(p=H[I])!=E){p=p}else{if(typeof(p=H[F])!=E&&G.length>0){p=h(p,G)}}return p}function g(){var F=s.apply(arguments),p=this,H=F.length===1?p:F.shift(),G;F=F[0]||{};function I(K,J){H.bind(K,function(){return J.apply(p,arguments)})}for(G in F){I(G,F[G])}}function B(p,F){return{input:p,form:F}}q=D.prototype;q.init=function(p){};q.filter=function(I,H){var p=[],F,G;for(F=0;F<I.length;F++){G=I[F];if(this.itemContains(G,H)){p.push(G)}}return p};q.itemContains=function(p,F){return this.itemToString(p).toLowerCase().indexOf(F.toLowerCase())==0};q.stringToItem=function(p){return p};q.itemToString=function(p){return p};q.compareItems=function(F,p){return F==p};q=k.prototype;q.init=function(G,J){var F=this,H,I,p;F._defaults=e.extend({},a);F._opts=J||{};F._plugins={};F._itemManager=I=new (F.opts(b))();G=e(G);p=e(F.opts(z));H=e(F.opts(t));G.wrap(p).keydown(function(K){return F.onKeyDown(K)}).keyup(function(K){return F.onKeyUp(K)}).data("textext",F);e(F).data({hiddenInput:H,wrapElement:G.parents(".text-wrap").first(),input:G});H.attr("name",G.attr("name"));G.attr("name",null);H.insertAfter(G);e.extend(true,I,F.opts(A+".item.manager"));e.extend(true,F,F.opts(A+".*"),F.opts(A+".core"));F.originalWidth=G.outerWidth();F.invalidateBounds();I.init(F);F.initPatches();F.initPlugins(F.opts(d),e.fn.textext.plugins);F.on({setFormData:F.onSetFormData,getFormData:F.onGetFormData,setInputData:F.onSetInputData,anyKeyUp:F.onAnyKeyUp});F.trigger(r);F.trigger(c);F.getFormData(0)};q.initPatches=function(){var G=[],F=e.fn.textext.patches,p;for(p in F){G.push(p)}this.initPlugins(G,F)};q.initPlugins=function(F,L){var G=this,J,H,K,p=[],I;if(typeof(F)=="string"){F=F.split(/\s*,\s*|\s+/g)}for(I=0;I<F.length;I++){H=F[I];K=L[H];if(K){G._plugins[H]=K=new K();G[H]=(function(M){return function(){return M}})(K);p.push(K);e.extend(true,K,G.opts(A+".*"),G.opts(A+"."+H))}}p.sort(function(N,M){N=N.initPriority();M=M.initPriority();return N===M?0:N<M?1:-1});for(I=0;I<p.length;I++){p[I].init(G)}};q.hasPlugin=function(p){return !!this._plugins[p]};q.on=g;q.bind=function(F,p){this.input().bind(F,p)};q.trigger=function(){var p=arguments;this.input().trigger(p[0],s.call(p,1))};q.itemManager=function(){return this._itemManager};q.input=function(){return e(this).data("input")};q.opts=function(F){var p=h(this._opts,F);return typeof(p)=="undefined"?h(this._defaults,F):p};q.wrapElement=function(){return e(this).data("wrapElement")};q.invalidateBounds=function(){var H=this,G=H.input(),J=H.wrapElement(),F=J.parent(),I=H.originalWidth+"px",p;H.trigger(u);p=G.outerHeight()+"px";G.css({width:I});J.css({width:I,height:p});F.css({height:p});H.trigger(x)};q.focusInput=function(){this.input()[0].focus()};q.serializeData=w;q.hiddenInput=function(p){return e(this).data("hiddenInput")};q.getWeightedEventResponse=function(H,G){var F=this,J={},p=0;F.trigger(H,J,G);for(var I in J){p=Math.max(p,I)}return J[p]};q.getFormData=function(G){var p=this,F=p.getWeightedEventResponse(m,G||0);p.trigger(o,F.form);p.trigger(y,F.input)};q.onAnyKeyUp=function(F,p){this.getFormData(p)};q.onSetInputData=function(F,p){this.input().val(p)};q.onSetFormData=function(G,F){var p=this;p.hiddenInput().val(p.serializeData(F))};q.onGetFormData=function(F,p){var G=this.input().val();p[0]=B(G,G)};e(["Down","Up"]).each(function(){var p=this.toString();q["onKey"+p]=function(I){var F=this,G=F.opts(C)[I.keyCode],H=true;if(G){H=G.substr(-1)!="!";G=G.replace("!","");F.trigger(G+"Key"+p);if(p=="Up"&&F._lastKeyDown==I.keyCode){F._lastKeyDown=null;F.trigger(G+"KeyPress")}if(p=="Down"){F._lastKeyDown=I.keyCode}}F.trigger("anyKey"+p,I.keyCode);return H}});q=n.prototype;q.on=g;q.formDataObject=B;q.init=function(p){throw new Error("Not implemented")};q.baseInit=function(p,G){var F=this;p._defaults=e.extend(true,p._defaults,G);F._core=p;F._timers={}};q.startTimer=function(G,F,H){var p=this;p.stopTimer(G);p._timers[G]=setTimeout(function(){delete p._timers[G];H.apply(p)},F*1000)};q.stopTimer=function(p){clearTimeout(this._timers[p])};q.core=function(){return this._core};q.opts=function(p){return this.core().opts(p)};q.itemManager=function(){return this.core().itemManager()};q.input=function(){return this.core().input()};q.val=function(F){var p=this.input();if(typeof(F)===E){return p.val()}else{p.val(F)}};q.trigger=function(){var p=this.core();p.trigger.apply(p,arguments)};q.bind=function(F,p){this.core().bind(F,p)};q.initPriority=function(){return 0};var f=false;var l=e.fn.textext=function(F){var p;if(!f&&(p=e.fn.textext.css)!=null){e("head").append("<style>"+p+"</style>");f=true}return this.map(function(){var H=e(this);if(F==null){return H.data("textext")}var G=new k();G.init(H,F);H.data("textext",G);return G.input()[0]})};l.addPlugin=function(p,F){l.plugins[p]=F;F.prototype=new l.TextExtPlugin()};l.addPatch=function(p,F){l.patches[p]=F;F.prototype=new l.TextExtPlugin()};l.TextExt=k;l.TextExtPlugin=n;l.ItemManager=D;l.plugins={};l.patches={}})(jQuery);(function(b){function a(){}b.fn.textext.TextExtIE9Patches=a;b.fn.textext.addPatch("ie9",a);var c=a.prototype;c.init=function(d){if(navigator.userAgent.indexOf("MSIE 9")==-1){return}var e=this;d.on({postInvalidate:e.onPostInvalidate})};c.onPostInvalidate=function(){var e=this,d=e.input(),f=d.val();d.val(Math.random());d.val(f)}})(jQuery);(function(j){function m(){}j.fn.textext.TextExtAjax=m;j.fn.textext.addPlugin("ajax",m);var b=m.prototype,g="ajax.data.callback",l="ajax.cache.results",f="ajax.loading.delay",k="ajax.loading.message",d="ajax.type.delay",c="setSuggestions",h="showDropdown",a="loading",e={ajax:{typeDelay:0.5,loadingMessage:"Loading...",loadingDelay:0.5,cacheResults:false,dataCallback:null}};b.init=function(n){var o=this;o.baseInit(n,e);o.on({getSuggestions:o.onGetSuggestions});o._suggestions=null};b.load=function(q){var n=this,o=n.opts(g)||function(r){return{q:r}},p;p=j.extend(true,{data:o(q),success:function(r){n.onComplete(r,q)},error:function(s,r){console.error(r,q)}},n.opts("ajax"));j.ajax(p)};b.onComplete=function(q,p){var o=this,n=q;o.dontShowLoading();if(o.opts(l)==true){o._suggestions=q;n=o.itemManager().filter(q,p)}o.trigger(c,{result:n})};b.dontShowLoading=function(){this.stopTimer(a)};b.showLoading=function(){var n=this;n.dontShowLoading();n.startTimer(a,n.opts(f),function(){n.trigger(h,function(p){p.clearItems();var o=p.addDropdownItem(n.opts(k));o.addClass("text-loading")})})};b.onGetSuggestions=function(r,q){var o=this,n=o._suggestions,p=(q||{}).query||"";if(n&&o.opts(l)===true){return o.onComplete(n,p)}o.startTimer("ajax",o.opts(d),function(){o.showLoading();o.load(p)})}})(jQuery);(function(c){function a(){}c.fn.textext.TextExtArrow=a;c.fn.textext.addPlugin("arrow",a);var d=a.prototype,e="html.arrow",b={html:{arrow:'<div class="text-arrow"/>'}};d.init=function(f){var g=this,h;g.baseInit(f,b);g._arrow=h=c(g.opts(e));g.core().wrapElement().append(h);h.bind("click",function(j){g.onArrowClick(j)})};d.onArrowClick=function(f){this.trigger("toggleDropdown");this.core().focusInput()}})(jQuery);(function(d){function h(){}d.fn.textext.TextExtAutocomplete=h;d.fn.textext.addPlugin("autocomplete",h);var r=h.prototype,f=".",u="text-selected",c=f+u,j="text-suggestion",l=f+j,g="text-label",o=f+g,n="autocomplete.enabled",B="autocomplete.dropdown.position",A="autocomplete.dropdown.maxHeight",b="autocomplete.render",x="html.dropdown",m="html.suggestion",t="hideDropdown",y="showDropdown",q="getSuggestions",k="getFormData",w="toggleDropdown",e="above",z="below",s="mousedownOnAutocomplete",a={autocomplete:{enabled:true,dropdown:{position:z,maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};r.init=function(C){var E=this;E.baseInit(C,a);var D=E.input(),p;if(E.opts(n)===true){E.on({blur:E.onBlur,anyKeyUp:E.onAnyKeyUp,deleteKeyUp:E.onAnyKeyUp,backspaceKeyPress:E.onBackspaceKeyPress,enterKeyPress:E.onEnterKeyPress,escapeKeyPress:E.onEscapeKeyPress,setSuggestions:E.onSetSuggestions,showDropdown:E.onShowDropdown,hideDropdown:E.onHideDropdown,toggleDropdown:E.onToggleDropdown,postInvalidate:E.positionDropdown,getFormData:E.onGetFormData,downKeyDown:E.onDownKeyDown,upKeyDown:E.onUpKeyDown});p=d(E.opts(x));p.insertAfter(D);E.on(p,{mouseover:E.onMouseOver,mousedown:E.onMouseDown,click:E.onClick});p.css("maxHeight",E.opts(A)).addClass("text-position-"+E.opts(B));d(E).data("container",p);d(document.body).click(function(F){if(E.isDropdownVisible()&&!E.withinWrapElement(F.target)){E.trigger(t)}});E.positionDropdown()}};r.containerElement=function(){return d(this).data("container")};r.onMouseOver=function(D){var p=this,C=d(D.target);if(!C.is(l)){C=C.closest(l)}if(C){p.clearSelected();C.addClass(u)}};r.onMouseDown=function(p){this.containerElement().data(s,true)};r.onClick=function(D){var p=this,C=d(D.target);if(C.is(l)){}else{C=C.closest(l)}if(C){p.trigger("enterKeyPress")}if(p.core().hasPlugin("tags")){p.val("")}};r.onBlur=function(E){var D=this,p=D.containerElement(),C=p.data(s)===true;if(D.isDropdownVisible()){C?D.core().focusInput():D.trigger(t)}p.removeData(s)};r.onBackspaceKeyPress=function(C){var p=this,D=p.val().length>0;if(D||p.isDropdownVisible()){p.getSuggestions()}};r.onAnyKeyUp=function(D,C){var p=this,E=p.opts("keys."+C)!=null;if(p.val().length>0&&!E){p.getSuggestions()}};r.onDownKeyDown=function(C){var p=this;p.isDropdownVisible()?p.toggleNextSuggestion():p.getSuggestions()};r.onUpKeyDown=function(p){this.togglePreviousSuggestion()};r.onEnterKeyPress=function(C){var p=this;if(p.isDropdownVisible()){p.selectFromDropdown()}};r.onEscapeKeyPress=function(C){var p=this;if(p.isDropdownVisible()){p.trigger(t)}};r.positionDropdown=function(){var D=this,C=D.containerElement(),F=D.opts(B),p=D.core().wrapElement().outerHeight(),E={};E[F===e?"bottom":"top"]=p+"px";C.css(E)};r.suggestionElements=function(){return this.containerElement().find(l)};r.setSelectedSuggestion=function(C){if(!C){return}var p=this,E=p.suggestionElements(),G=E.first(),F,D;p.clearSelected();for(D=0;D<E.length;D++){F=d(E[D]);if(p.itemManager().compareItems(F.data(j),C)){G=F.addClass(u);break}}G.addClass(u);p.scrollSuggestionIntoView(G)};r.selectedSuggestionElement=function(){return this.suggestionElements().filter(c).first()};r.isDropdownVisible=function(){return this.containerElement().is(":visible")===true};r.onGetFormData=function(G,E,F){var C=this,H=C.val(),p=H,D=H;E[100]=C.formDataObject(p,D)};r.initPriority=function(){return 200};r.onHideDropdown=function(p){this.hideDropdown()};r.onToggleDropdown=function(C){var p=this;p.trigger(p.containerElement().is(":visible")?t:y)};r.onShowDropdown=function(E,F){var C=this,D=C.selectedSuggestionElement().data(j),p=C._suggestions;if(!p){return C.trigger(q)}if(d.isFunction(F)){F(C)}else{C.renderSuggestions(C._suggestions);C.toggleNextSuggestion()}C.showDropdown(C.containerElement());C.setSelectedSuggestion(D)};r.onSetSuggestions=function(E,D){var C=this,p=C._suggestions=D.result;if(D.showHideDropdown!==false){C.trigger(p===null||p.length===0?t:y)}};r.getSuggestions=function(){var p=this,C=p.val();if(p._previousInputValue==C){return}if(C==""){current=null}p._previousInputValue=C;p.trigger(q,{query:C})};r.clearItems=function(){this.containerElement().find(".text-list").children().remove()};r.renderSuggestions=function(p){var C=this;C.clearItems();d.each(p||[],function(D,E){C.addSuggestion(E)})};r.showDropdown=function(){this.containerElement().show()};r.hideDropdown=function(){var p=this,C=p.containerElement();p._previousInputValue=null;C.hide()};r.addSuggestion=function(C){var p=this,E=p.opts(b),D=p.addDropdownItem(E?E.call(p,C):p.itemManager().itemToString(C));D.data(j,C)};r.addDropdownItem=function(D){var C=this,p=C.containerElement().find(".text-list"),E=d(C.opts(m));E.find(".text-label").html(D);p.append(E);return E};r.clearSelected=function(){this.suggestionElements().removeClass(u)};r.toggleNextSuggestion=function(){var p=this,D=p.selectedSuggestionElement(),C;if(D.length>0){C=D.next();if(C.length>0){D.removeClass(u)}}else{C=p.suggestionElements().first()}C.addClass(u);p.scrollSuggestionIntoView(C)};r.togglePreviousSuggestion=function(){var p=this,C=p.selectedSuggestionElement(),D=C.prev();if(D.length==0){return}p.clearSelected();D.addClass(u);p.scrollSuggestionIntoView(D)};r.scrollSuggestionIntoView=function(F){var I=F.outerHeight(),H=this.containerElement(),D=H.innerHeight(),G=H.scrollTop(),C=(F.position()||{}).top,p=null,E=parseInt(H.css("paddingTop"));if(C==null){return}if(C+I>D){p=C+G+I-D+E}if(C<0){p=C+G-E}if(p!=null){H.scrollTop(p)}};r.selectFromDropdown=function(){var C=this,p=C.selectedSuggestionElement().data(j);if(p){C.val(C.itemManager().itemToString(p));C.core().getFormData()}C.trigger(t)};r.withinWrapElement=function(p){return this.core().wrapElement().find(p).size()>0}})(jQuery);(function(d){function f(){}d.fn.textext.TextExtFilter=f;d.fn.textext.addPlugin("filter",f);var e=f.prototype,a="filter.enabled",c="filter.items",b={filter:{enabled:true,items:null}};e.init=function(g){var h=this;h.baseInit(g,b);h.on({getFormData:h.onGetFormData,isTagAllowed:h.onIsTagAllowed,setSuggestions:h.onSetSuggestions});h._suggestions=null};e.onGetFormData=function(m,k,l){var h=this,n=h.val(),g=n,j="";if(!h.core().hasPlugin("tags")){if(h.isValueAllowed(g)){j=n}k[300]=h.formDataObject(g,j)}};e.isValueAllowed=function(m){var h=this,l=h.opts("filterItems")||h._suggestions||[],k=h.itemManager(),g=!h.opts(a),j;for(j=0;j<l.length&&!g;j++){if(k.compareItems(m,l[j])){g=true}}return g};e.onIsTagAllowed=function(h,g){g.result=this.isValueAllowed(g.tag)};e.onSetSuggestions=function(h,g){this._suggestions=g.result}})(jQuery);(function(d){function c(){}d.fn.textext.TextExtFocus=c;d.fn.textext.addPlugin("focus",c);var e=c.prototype,a="html.focus",b={html:{focus:'<div class="text-focus"/>'}};e.init=function(f){var g=this;g.baseInit(f,b);g.core().wrapElement().append(g.opts(a));g.on({blur:g.onBlur,focus:g.onFocus});g._timeoutId=0};e.onBlur=function(g){var f=this;clearTimeout(f._timeoutId);f._timeoutId=setTimeout(function(){f.getFocus().hide()},100)};e.onFocus=function(g){var f=this;clearTimeout(f._timeoutId);f.getFocus().show()};e.getFocus=function(){return this.core().wrapElement().find(".text-focus")}})(jQuery);(function(e){function b(){}e.fn.textext.TextExtPrompt=b;e.fn.textext.addPlugin("prompt",b);var f=b.prototype,g="text-hide-prompt",a="prompt",d="html.prompt",c={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};f.init=function(k){var l=this,m="placeholder",j,h;l.baseInit(k,c);j=e(l.opts(d));e(l).data("container",j);l.core().wrapElement().append(j);l.setPrompt(l.opts(a));h=k.input().attr(m);if(!h){h=l.opts(a)}k.input().attr(m,"");if(h){l.setPrompt(h)}if(e.trim(l.val()).length>0){l.hidePrompt()}l.on({blur:l.onBlur,focus:l.onFocus,postInvalidate:l.onPostInvalidate,postInit:l.onPostInit})};f.onPostInit=function(h){this.invalidateBounds()};f.onPostInvalidate=function(h){this.invalidateBounds()};f.invalidateBounds=function(){var j=this,h=j.input();j.containerElement().css({paddingLeft:h.css("paddingLeft"),paddingTop:h.css("paddingTop")})};f.onBlur=function(j){var h=this;h.startTimer("prompt",0.1,function(){h.showPrompt()})};f.showPrompt=function(){var j=this,h=j.input();if(e.trim(j.val()).length===0&&!h.is(":focus")){j.containerElement().removeClass(g)}};f.hidePrompt=function(){this.stopTimer("prompt");this.containerElement().addClass(g)};f.onFocus=function(h){this.hidePrompt()};f.setPrompt=function(h){this.containerElement().text(h)};f.containerElement=function(){return e(this).data("container")}})(jQuery);(function(d){function a(){}d.fn.textext.TextExtSuggestions=a;d.fn.textext.addPlugin("suggestions",a);var e=a.prototype,c="suggestions",b={suggestions:null};e.init=function(f){var g=this;g.baseInit(f,b);g.on({getSuggestions:g.onGetSuggestions,postInit:g.onPostInit})};e.setSuggestions=function(f,g){this.trigger("setSuggestions",{result:f,showHideDropdown:g!=false})};e.onPostInit=function(g){var f=this;f.setSuggestions(f.opts(c),false)};e.onGetSuggestions=function(j,h){var g=this,f=g.opts(c);f.sort();g.setSuggestions(g.itemManager().filter(f,h.query))}})(jQuery);(function(g){function x(){}g.fn.textext.TextExtTags=x;g.fn.textext.addPlugin("tags",x);var q=x.prototype,j=".",o="text-tags-on-top",l=j+o,r="text-tag",t=j+r,e="text-tags",a=j+e,k="text-label",n=j+k,d="text-remove",f=j+d,m="tags.enabled",h="tags.items",u="html.tag",w="html.tags",b="isTagAllowed",s="tagClick",c={tags:{enabled:true,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};q.init=function(y){this.baseInit(y,c);var A=this,z=A.input(),p;if(A.opts(m)){p=g(A.opts(w));z.after(p);g(A).data("container",p);A.on({enterKeyPress:A.onEnterKeyPress,backspaceKeyDown:A.onBackspaceKeyDown,preInvalidate:A.onPreInvalidate,postInit:A.onPostInit,getFormData:A.onGetFormData});A.on(p,{click:A.onClick,mousemove:A.onContainerMouseMove});A.on(z,{mousemove:A.onInputMouseMove})}A._originalPadding={left:parseInt(z.css("paddingLeft")||0),top:parseInt(z.css("paddingTop")||0)};A._paddingBox={left:0,top:0};A.updateFormCache()};q.containerElement=function(){return g(this).data("container")};q.onPostInit=function(y){var p=this;p.addTags(p.opts(h))};q.onGetFormData=function(C,A,B){var y=this,p=B===13?"":y.val(),z=y._formData;A[200]=y.formDataObject(p,z)};q.initPriority=function(){return 100};q.onInputMouseMove=function(p){this.toggleZIndex(p)};q.onContainerMouseMove=function(p){this.toggleZIndex(p)};q.onBackspaceKeyDown=function(z){var p=this,y=p.tagElements().last();if(p.val().length==0){p.removeTag(y)}};q.onPreInvalidate=function(z){var p=this,y=p.tagElements().last(),A=y.position();if(y.length>0){A.left+=y.innerWidth()}else{A=p._originalPadding}p._paddingBox=A;p.input().css({paddingLeft:A.left,paddingTop:A.top})};q.onClick=function(D){var A=this,z=A.core(),C=g(D.target),y=0,p;if(C.is(a)){y=1}else{if(C.is(f)){A.removeTag(C.parents(t+":first"));y=1}else{if(C.is(n)){p=C.parents(t+":first");A.trigger(s,p,p.data(r),B)}}}function B(F,E){p.data(r,F);p.find(n).text(A.itemManager().itemToString(F));A.updateFormCache();z.getFormData();z.invalidateBounds();if(E){z.focusInput()}}if(y){z.focusInput()}};q.onEnterKeyPress=function(z){var y=this,A=y.val(),p=y.itemManager().stringToItem(A);if(y.isTagAllowed(p)){y.addTags([p]);y.core().focusInput()}};q.updateFormCache=function(){var y=this,p=[];y.tagElements().each(function(){p.push(g(this).data(r))});y._formData=p};q.toggleZIndex=function(E){var F=this,C=F.input().offset(),A=E.clientX-C.left,z=E.clientY-C.top,D=F._paddingBox,p=F.containerElement(),B=p.is(l),y=A>D.left&&z>D.top;if(!B&&!y||B&&y){p[(!B?"add":"remove")+"Class"](o)}};q.tagElements=function(){return this.containerElement().find(t)};q.isTagAllowed=function(p){var y={tag:p,result:true};this.trigger(b,y);return y.result===true};q.addTags=function(B){if(!B||B.length==0){return}var A=this,z=A.core(),y=A.containerElement(),C,p;for(C=0;C<B.length;C++){p=B[C];if(p&&A.isTagAllowed(p)){y.append(A.renderTag(p))}}A.updateFormCache();z.getFormData();z.invalidateBounds()};q.getTagElement=function(p){var y=this,B=y.tagElements(),z,A;for(z=0;z<B.length,A=g(B[z]);z++){if(y.itemManager().compareItems(A.data(r),p)){return A}}};q.removeTag=function(p){var z=this,y=z.core(),A;if(p instanceof g){A=p;p=p.data(r)}else{A=z.getTagElement(p)}A.remove();z.updateFormCache();y.getFormData();y.invalidateBounds()};q.renderTag=function(p){var y=this,z=g(y.opts(u));z.find(".text-label").text(y.itemManager().itemToString(p));z.data(r,p);return z}})(jQuery);(function(d,f,g,b){var e="tooltipster",c={animation:"fade",arrow:true,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionBefore:function(l,m){m()},functionReady:function(l,m){},functionAfter:function(l){},icon:"(?)",iconDesktop:false,iconTouch:false,iconTheme:".tooltipster-icon",interactive:false,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:true,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:true,trigger:"hover",updateAnimation:true};function h(m,l){this.element=m;this.options=d.extend({},c,l);this._defaults=c;this._name=e;this.init()}function j(){return !!("ontouchstart" in f)}function a(){var l=g.body||g.documentElement;var n=l.style;var o="transition";if(typeof n[o]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],o=o.charAt(0).toUpperCase()+o.substr(1);for(var m=0;m<v.length;m++){if(typeof n[v[m]+o]=="string"){return true}}return false}var k=true;if(!a()){k=false}h.prototype={init:function(){var r=d(this.element);var n=this;var q=true;if((n.options.touchDevices==false)&&(j())){q=false}if(g.all&&!g.querySelector){q=false}if(q==true){if((this.options.iconDesktop==true)&&(!j())||((this.options.iconTouch==true)&&(j()))){var m=r.attr("title");r.removeAttr("title");var p=n.options.iconTheme;var o=d('<span class="'+p.replace(".","")+'" title="'+m+'">'+this.options.icon+"</span>");o.insertAfter(r);r.data("tooltipsterIcon",o);r=o}var l=n.options.content||r.attr("title");r.data("tooltipsterContent",l);r.removeAttr("title");if((this.options.touchDevices==true)&&(j())){r.bind("touchstart",function(t,s){n.showTooltip()})}else{if(this.options.trigger=="hover"){r.on("mouseenter.tooltipster",function(){n.showTooltip()});if(this.options.interactive==true){r.on("mouseleave.tooltipster",function(){var t=r.data("tooltipster");var u=false;if((t!==b)&&(t!=="")){t.mouseenter(function(){u=true});t.mouseleave(function(){u=false});var s=setTimeout(function(){if(u==true){t.mouseleave(function(){n.hideTooltip()})}else{n.hideTooltip()}},n.options.interactiveTolerance)}else{n.hideTooltip()}})}else{r.on("mouseleave.tooltipster",function(){n.hideTooltip()})}}if(this.options.trigger=="click"){r.on("click.tooltipster",function(){if((r.data("tooltipster")=="")||(r.data("tooltipster")==b)){n.showTooltip()}else{n.hideTooltip()}})}}}},showTooltip:function(m){var n=d(this.element);var l=this;if(n.data("tooltipsterIcon")!==b){n=n.data("tooltipsterIcon")}if(!n.hasClass("tooltipster-disable")){if((d(".tooltipster-base").not(".tooltipster-dying").length>0)&&(l.options.onlyOne==true)){d(".tooltipster-base").not(".tooltipster-dying").not(n.data("tooltipster")).each(function(){d(this).addClass("tooltipster-kill");var o=d(this).data("origin");o.data("plugin_tooltipster").hideTooltip()})}n.clearQueue().delay(l.options.delay).queue(function(){l.options.functionBefore(n,function(){if((n.data("tooltipster")!==b)&&(n.data("tooltipster")!=="")){var w=n.data("tooltipster");if(!w.hasClass("tooltipster-kill")){var s="tooltipster-"+l.options.animation;w.removeClass("tooltipster-dying");if(k==true){w.clearQueue().addClass(s+"-show")}if(l.options.timer>0){var q=w.data("tooltipsterTimer");clearTimeout(q);q=setTimeout(function(){w.data("tooltipsterTimer",b);l.hideTooltip()},l.options.timer);w.data("tooltipsterTimer",q)}if((l.options.touchDevices==true)&&(j())){d("body").bind("touchstart",function(B){if(l.options.interactive==true){var D=d(B.target);var C=true;D.parents().each(function(){if(d(this).hasClass("tooltipster-base")){C=false}});if(C==true){l.hideTooltip();d("body").unbind("touchstart")}}else{l.hideTooltip();d("body").unbind("touchstart")}})}}}else{d("body").css("overflow-x","hidden");var x=n.data("tooltipsterContent");var u=l.options.theme;var y=u.replace(".","");var s="tooltipster-"+l.options.animation;var r="-webkit-transition-duration: "+l.options.speed+"ms; -webkit-animation-duration: "+l.options.speed+"ms; -moz-transition-duration: "+l.options.speed+"ms; -moz-animation-duration: "+l.options.speed+"ms; -o-transition-duration: "+l.options.speed+"ms; -o-animation-duration: "+l.options.speed+"ms; -ms-transition-duration: "+l.options.speed+"ms; -ms-animation-duration: "+l.options.speed+"ms; transition-duration: "+l.options.speed+"ms; animation-duration: "+l.options.speed+"ms;";var o=l.options.fixedWidth>0?"width:"+l.options.fixedWidth+"px;":"";var z=l.options.maxWidth>0?"max-width:"+l.options.maxWidth+"px;":"";var t=l.options.interactive==true?"pointer-events: auto;":"";var w=d('<div class="tooltipster-base '+y+" "+s+'" style="'+o+" "+z+" "+t+" "+r+'"><div class="tooltipster-content"></div></div>');w.find(".tooltipster-content").html(x);w.appendTo("body");n.data("tooltipster",w);w.data("origin",n);l.positionTooltip();l.options.functionReady(n,w);if(k==true){w.addClass(s+"-show")}else{w.css("display","none").removeClass(s).fadeIn(l.options.speed)}var A=x;var p=setInterval(function(){var B=n.data("tooltipsterContent");if(d("body").find(n).length==0){w.addClass("tooltipster-dying");l.hideTooltip()}else{if((A!==B)&&(B!=="")){A=B;w.find(".tooltipster-content").html(B);if(l.options.updateAnimation==true){if(a()){w.css({width:"","-webkit-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+l.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing");setTimeout(function(){w.removeClass("tooltipster-content-changing");setTimeout(function(){w.css({"-webkit-transition":l.options.speed+"ms","-moz-transition":l.options.speed+"ms","-o-transition":l.options.speed+"ms","-ms-transition":l.options.speed+"ms",transition:l.options.speed+"ms"})},l.options.speed)},l.options.speed)}else{w.fadeTo(l.options.speed,0.5,function(){w.fadeTo(l.options.speed,1)})}}l.positionTooltip()}}if((d("body").find(w).length==0)||(d("body").find(n).length==0)){clearInterval(p)}},200);if(l.options.timer>0){var q=setTimeout(function(){w.data("tooltipsterTimer",b);l.hideTooltip()},l.options.timer+l.options.speed);w.data("tooltipsterTimer",q)}if((l.options.touchDevices==true)&&(j())){d("body").bind("touchstart",function(B){if(l.options.interactive==true){var D=d(B.target);var C=true;D.parents().each(function(){if(d(this).hasClass("tooltipster-base")){C=false}});if(C==true){l.hideTooltip();d("body").unbind("touchstart")}}else{l.hideTooltip();d("body").unbind("touchstart")}})}w.mouseleave(function(){l.hideTooltip()})}});n.dequeue()})}},hideTooltip:function(m){var p=d(this.element);var l=this;if(p.data("tooltipsterIcon")!==b){p=p.data("tooltipsterIcon")}var o=p.data("tooltipster");if(o==b){o=d(".tooltipster-dying")}p.clearQueue();if((o!==b)&&(o!=="")){var q=o.data("tooltipsterTimer");if(q!==b){clearTimeout(q)}var n="tooltipster-"+l.options.animation;if(k==true){o.clearQueue().removeClass(n+"-show").addClass("tooltipster-dying").delay(l.options.speed).queue(function(){o.remove();p.data("tooltipster","");d("body").css("verflow-x","");l.options.functionAfter(p)})}else{o.clearQueue().addClass("tooltipster-dying").fadeOut(l.options.speed,function(){o.remove();p.data("tooltipster","");d("body").css("verflow-x","");l.options.functionAfter(p)})}}},positionTooltip:function(O){var A=d(this.element);var ab=this;if(A.data("tooltipsterIcon")!==b){A=A.data("tooltipsterIcon")}if((A.data("tooltipster")!==b)&&(A.data("tooltipster")!=="")){var ah=A.data("tooltipster");ah.css("width","");var ai=d(f).width();var B=A.outerWidth(false);var ag=A.outerHeight(false);var al=ah.outerWidth(false);var m=ah.innerWidth();var M=ah.outerHeight(false);var aa=A.offset();var Z=aa.top;var u=aa.left;var y=b;if(A.is("area")){var T=A.attr("shape");var af=A.parent().attr("name");var P=d('img[usemap="#'+af+'"]');var n=P.offset().left;var L=P.offset().top;var W=A.attr("coords")!==b?A.attr("coords").split(","):b;if(T=="circle"){var N=parseInt(W[0]);var r=parseInt(W[1]);var D=parseInt(W[2]);ag=D*2;B=D*2;Z=L+r-D;u=n+N-D}else{if(T=="rect"){var N=parseInt(W[0]);var r=parseInt(W[1]);var q=parseInt(W[2]);var J=parseInt(W[3]);ag=J-r;B=q-N;Z=L+r;u=n+N}else{if(T=="poly"){var x=[];var ae=[];var H=0,G=0,ad=0,ac=0;var aj="even";for(i=0;i<W.length;i++){var F=parseInt(W[i]);if(aj=="even"){if(F>ad){ad=F;if(i==0){H=ad}}if(F<H){H=F}aj="odd"}else{if(F>ac){ac=F;if(i==1){G=ac}}if(F<G){G=F}aj="even"}}ag=ac-G;B=ad-H;Z=L+G;u=n+H}else{ag=P.outerHeight(false);B=P.outerWidth(false);Z=L;u=n}}}}if(ab.options.fixedWidth==0){ah.css({width:m+"px","padding-left":"0px","padding-right":"0px"})}var s=0,V=0;var X=parseInt(ab.options.offsetY);var Y=parseInt(ab.options.offsetX);var p="";function w(){var an=d(f).scrollLeft();if((s-an)<0){var am=s-an;s=an;ah.data("arrow-reposition",am)}if(((s+al)-an)>ai){var am=s-((ai+an)-al);s=(ai+an)-al;ah.data("arrow-reposition",am)}}function t(an,am){if(((Z-d(f).scrollTop()-M-X-12)<0)&&(am.indexOf("top")>-1)){ab.options.position=an;y=am}if(((Z+ag+M+12+X)>(d(f).scrollTop()+d(f).height()))&&(am.indexOf("bottom")>-1)){ab.options.position=an;y=am;V=(Z-M)-X-12}}if(ab.options.position=="top"){var Q=(u+al)-(u+B);s=(u+Y)-(Q/2);V=(Z-M)-X-12;w();t("bottom","top")}if(ab.options.position=="top-left"){s=u+Y;V=(Z-M)-X-12;w();t("bottom-left","top-left")}if(ab.options.position=="top-right"){s=(u+B+Y)-al;V=(Z-M)-X-12;w();t("bottom-right","top-right")}if(ab.options.position=="bottom"){var Q=(u+al)-(u+B);s=u-(Q/2)+Y;V=(Z+ag)+X+12;w();t("top","bottom")}if(ab.options.position=="bottom-left"){s=u+Y;V=(Z+ag)+X+12;w();t("top-left","bottom-left")}if(ab.options.position=="bottom-right"){s=(u+B+Y)-al;V=(Z+ag)+X+12;w();t("top-right","bottom-right")}if(ab.options.position=="left"){s=u-Y-al-12;myLeftMirror=u+Y+B+12;var K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X;if((s<0)&&((myLeftMirror+al)>ai)){var o=parseFloat(ah.css("border-width"))*2;var l=(al+s)-o;ah.css("width",l+"px");M=ah.outerHeight(false);s=u-Y-l-12-o;K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X}else{if(s<0){s=u+Y+B+12;ah.data("arrow-reposition","left")}}}if(ab.options.position=="right"){s=u+Y+B+12;myLeftMirror=u-Y-al-12;var K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X;if(((s+al)>ai)&&(myLeftMirror<0)){var o=parseFloat(ah.css("border-width"))*2;var l=(ai-s)-o;ah.css("width",l+"px");M=ah.outerHeight(false);K=(Z+M)-(Z+A.outerHeight(false));V=Z-(K/2)-X}else{if((s+al)>ai){s=u-Y-al-12;ah.data("arrow-reposition","right")}}}if(ab.options.arrow==true){var I="tooltipster-arrow-"+ab.options.position;if(ab.options.arrowColor.length<1){var R=ah.css("background-color")}else{var R=ab.options.arrowColor}var ak=ah.data("arrow-reposition");if(!ak){ak=""}else{if(ak=="left"){I="tooltipster-arrow-right";ak=""}else{if(ak=="right"){I="tooltipster-arrow-left";ak=""}else{ak="left:"+ak+"px;"}}}if((ab.options.position=="top")||(ab.options.position=="top-left")||(ab.options.position=="top-right")){var U=parseFloat(ah.css("border-bottom-width"));var z=ah.css("border-bottom-color")}else{if((ab.options.position=="bottom")||(ab.options.position=="bottom-left")||(ab.options.position=="bottom-right")){var U=parseFloat(ah.css("border-top-width"));var z=ah.css("border-top-color")}else{if(ab.options.position=="left"){var U=parseFloat(ah.css("border-right-width"));var z=ah.css("border-right-color")}else{if(ab.options.position=="right"){var U=parseFloat(ah.css("border-left-width"));var z=ah.css("border-left-color")}else{var U=parseFloat(ah.css("border-bottom-width"));var z=ah.css("border-bottom-color")}}}}if(U>1){U++}var E="";if(U!==0){var C="";var S="border-color: "+z+";";if(I.indexOf("bottom")!==-1){C="margin-top: -"+U+"px;"}else{if(I.indexOf("top")!==-1){C="margin-bottom: -"+U+"px;"}else{if(I.indexOf("left")!==-1){C="margin-right: -"+U+"px;"}else{if(I.indexOf("right")!==-1){C="margin-left: -"+U+"px;"}}}}E='<span class="tooltipster-arrow-border" style="'+C+" "+S+';"></span>'}ah.find(".tooltipster-arrow").remove();p='<div class="'+I+' tooltipster-arrow" style="'+ak+'">'+E+'<span style="border-color:'+R+';"></span></div>';ah.append(p)}ah.css({top:V+"px",left:s+"px"});if(y!==b){ab.options.position=y}}}};d.fn[e]=function(m){if(typeof m==="string"){var o=this;var l=arguments[1];if(o.data("plugin_tooltipster")==b){var n=o.find("*");o=d();n.each(function(){if(d(this).data("plugin_tooltipster")!==b){o.push(d(this))}})}o.each(function(){switch(m.toLowerCase()){case"show":d(this).data("plugin_tooltipster").showTooltip();break;case"hide":d(this).data("plugin_tooltipster").hideTooltip();break;case"disable":d(this).addClass("tooltipster-disable");break;case"enable":d(this).removeClass("tooltipster-disable");break;case"destroy":d(this).data("plugin_tooltipster").hideTooltip();d(this).data("plugin_tooltipster","").data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster");break;case"update":d(this).data("tooltipsterContent",l);break;case"reposition":d(this).data("plugin_tooltipster").positionTooltip();break}});return this}return this.each(function(){if(!d.data(this,"plugin_"+e)){d.data(this,"plugin_"+e,new h(this,m))}var p=d(this).data("plugin_tooltipster").options;if((p.iconDesktop==true)&&(!j())||((p.iconTouch==true)&&(j()))){var q=d(this).data("plugin_tooltipster");d(this).next().data("plugin_tooltipster",q)}})};if(j()){f.addEventListener("orientationchange",function(){if(d(".tooltipster-base").length>0){d(".tooltipster-base").each(function(){var l=d(this).data("origin");l.data("plugin_tooltipster").hideTooltip()})}},false)}d(f).on("resize.tooltipster",function(){var l=d(".tooltipster-base").data("origin");if((l!==null)&&(l!==b)){l.tooltipster("reposition")}})})(jQuery,window,document);
/*! jQuery-USOS 1.2 -- https://github.com/MUCI/jquery-usos */
(function(r){var u="usosCore";var t={settings:null,preloaderElement:null};var m=function(a){if(t.settings!==null){r.usosCore._console.error("jQuery.usosCore is already initialized! Subsequent calls to init will be ingored!");return}var b={debug:false,langpref:"en",usosAPIs:{"default":{methodUrl:null,extraParams:{},user_id:null}},entityURLs:{"entity/users/user":null,"entity/fac/faculty":null,"entity/slips/template":null},_requestDelay:0};t.settings=r.extend(true,{},b,a);t.preloaderElement=r("<div style='display: none'>");r(function(){r(document.body).append(t.preloaderElement)})};var s=function(c){var b={};var a=false;r.each(c,function(f,e){if(r.isArray(e)){e=e.join("|")}else{if(typeof e!=="string"){if(File&&File.prototype.isPrototypeOf(e)){a=true}else{e=""+e}}}b[f]=e});if(!a){return b}var d=new FormData();r.each(b,function(f,e){d.append(f,e)});return d};var w=function(f){var b={source_id:"default",method:"method_name",params:{},syncMode:"noSync",syncObject:null,success:null,error:null,errorOnUnload:false};var g=r.extend({},b,f);if(g.syncMode=="noSync"){if(g.syncObject!==null){throw ("syncObject must stay null if syncMode is 'noSync'")}}else{if((g.syncMode=="receiveLast")||(g.syncMode=="receiveIncrementalFast")){if(g.syncObject===null){throw ("syncObject must be an object if syncMode is other than 'noSync'. Check out the docs!")}}else{throw ("Invalid syncMode: "+g.syncMode)}}var d=null;if(g.syncObject!==null){if(typeof g.syncObject.lastIssuedRequestId==="undefined"){g.syncObject.lastIssuedRequestId=0;g.syncObject.lastReceivedRequestId=0}g.syncObject.lastIssuedRequestId++;d=g.syncObject.lastIssuedRequestId}var e=t.settings.usosAPIs[g.source_id].methodUrl.replace("%s",g.method);var c=r.extend({},g.params,t.settings.usosAPIs[g.source_id].extraParams);var h=r.Deferred();var k=function(C,B,A){if(g.syncObject!==null){if(g.syncObject.lastReceivedRequestId>d){return}if((g.syncMode=="receiveLast")&&d<g.syncObject.lastIssuedRequestId){return}g.syncObject.lastReceivedRequestId=d}if(g.success!==null){g.success(C)}h.resolve(C)};var l=function(G,D,F){if(g.syncObject!==null){if(g.syncObject.lastReceivedRequestId>d){return}g.syncObject.lastReceivedRequestId=d}var C;try{if(G&&G.responseText){C=r.parseJSON(G.responseText)}else{throw"Missing responseText"}}catch(E){if(G.status!=0){r.usosCore._console.error("usosapiFetch: Failed to parse the error response: ",E);C={message:"USOS API communication error."}}else{C=undefined}}if((G.status!=0)||g.errorOnUnload){if(g.error!==null){g.error(C)}h.reject(C)}};var j={type:"POST",url:e,data:s(c),dataType:"json",success:k,error:l};if(FormData&&FormData.prototype.isPrototypeOf(j.data)){j.contentType=false;j.processData=false}var a=null;if(t.settings._requestDelay!=0){a=setTimeout(function(){a=r.ajax(j)},t.settings._requestDelay)}else{a=r.ajax(j)}if(g.syncMode=="noSync"){return h.promise({abort:function(){if(a.abort){a.abort()}else{clearTimeout(a)}}})}};var x=function(){if(arguments.length==1){if(arguments[0]===null){return x({langdict:{pl:null,en:null}})}else{if(typeof arguments[0].langdict!=="undefined"){}else{if((typeof arguments[0].pl!=="undefined")||(typeof arguments[0].en!=="undefined")){return x({langdict:arguments[0]})}else{return x(arguments[0],arguments[0])}}}}else{if(arguments.length==2){return x({langdict:{pl:arguments[0],en:arguments[1]}})}else{if(arguments.length==0){return t.settings.langpref}else{throw ("Invalid arguments")}}}var g={langdict:null,langpref:"inherit",wrapper:"simple"};var d=r.extend({},g,arguments[0]);if(d.langpref=="inherit"){d.langpref=t.settings.langpref}var c,e,f;if(typeof d.langdict!=="object"){c=d.langdict;e=d.langdict}else{c=d.langdict.pl;e=d.langdict.en}if(d.wrapper=="none"){if(d.langpref=="pl"){return c}else{return e}}else{if(d.wrapper=="simple"){if(d.langpref=="pl"){if(c){f=c}else{if(e){f="(po angielsku) "+e}else{f="(brak danych)"}}}else{if(e){f=e}else{if(c){f="(in Polish) "+c}else{f="(unknown)"}}}return f}else{if((d.wrapper=="jQuery.text")||(d.wrapper=="jQuery.html")){var a,b;if(d.wrapper=="jQuery.html"){a="<div>";b="html"}else{a="<span>";b="text"}f=r(a);if(d.langpref=="pl"){if(c){f[b](c)}else{if(e){f.append(r(a).addClass("ua-note").text("(po angielsku)")).append(" ").append(r(a)[b](e))}else{f.append(r(a).addClass("ua-note").text("(brak danych)"))}}}else{if(e){f[b](e)}else{if(c){f.append(r(a).addClass("ua-note").text("(in Polish)")).append(" ").append(r(a)[b](c))}else{f.append(r(a).addClass("ua-note").text("(unknown)"))}}}return f}else{r.usosCore._console.error("Unknown wrapper "+d.wrapper+", assuming 'default'.");d.wrapper="default";return x(d)}}}};var p=function(d,g,h,a,c,e){if(t.settings.langpref=="pl"){if(d==1){return g}var b=d%10;var f=d%100;if((f>=12)&&(f<=14)){return a}if((b>=2)&&(b<=4)){return h}return a}else{if(d==1){return c}return e}};var o=function(){var c=function(d){if(typeof d==="object"){return r.extend(true,{},d)}else{return d}};var b=function(f){var d=[];for(var e=0;e<f.length;e++){d.push(c(f[e]))}return d};var a={};r.each(["log","warn","error","assert"],function(e,d){a[d]=function(){if(t.settings.debug&&window.console&&window.console[d]){Function.prototype.apply.call(window.console[d],window.console,b(arguments))}}});return a}();var y=function(g){var a=2000;var b=r("<div class='ua-paragraphs ua-container'>");if(typeof g==="object"&&g.user_messages&&g.user_messages.fields){a=0;r.each(g.user_messages.fields,function(j,h){b.append(r("<p style='font-size: 120%; line-height: 130%; margin-bottom: 25px'>").append(r("<b>").html(r.usosCore.lang(h))))});b.append(r("<p>").text(r.usosCore.lang("Jeśli powyższy komunikat jest niezrozumiały, to zalecamy odświeżyć stronę. Być może w trakcie, gdy ją oglądałeś, utraciłeś uprawnienia do wykonania akcji, którą chciałeś wykonać.","If the notice displayed above is vague, then we advise you to refresh the page. Perhaps you have just lost permissions to perform the action you've been trying to perform.")));var e=r("<a class='ua-link'>").html(r.usosCore.lang("Odśwież stronę","Reload the page")).click(function(){window.location.reload(true)});var c=r("<a class='ua-link'>").html(r.usosCore.lang("Zamknij i kontynuuj","Close and continue")).click(function(){b.dialog("close")});b.append(r("<p style='text-align: center; font-size: 120%; margin-top: 20px'>").append(e).append(" ").append(r("<span class='ua-note'>").css({display:"inline-block",width:"60px"})).append(" ").append(c));if(t.settings.debug){r.usosCore._console.warn("Displaying panic screen based on `user_messages` response. Try to use `yourValueInputs.usosForms('showErrors', response)` if possible.")}}else{b.append(r("<p style='font-size: 120%; margin-bottom: 25px'>").append(r("<b>").html(r.usosCore.lang({pl:"Wystąpił niespodziewany błąd.",en:"Unexpected error occured."}))));var f=r("<ul>");b.append(f);f.append(r("<li>").html(r.usosCore.lang("<p><b>Najpierw spróbuj odświeżyć stronę.</b> Odwieżenie strony często może pomóc, np. jeśli błąd jest spowodowany automatycznym wylogowaniem po dłuższej nieaktywności.</p><p style='font-size: 120%; margin-bottom: 18px'><a>Kliknij tutaj, aby odświeżyć stronę</a></p>","<p><b>First, try to refresh the page.</b> Refreshing can often help, particularly if the error occured due to an automatic user sign-out after a prolonged period of inactivity.</p><p style='font-size: 120%; margin-bottom: 18px'><a>Click here to refresh the page</a></p>")).each(function(){r(this).find("a").addClass("ua-link").click(function(){window.location.reload(true)})}));f.append(r("<li>").html(r.usosCore.lang("Spróbuj ponownie wykonać akcję, która spowodowała wystąpienie błędu. Być może był to jednorazowy błąd spowodowany chwilową utratą połączenia z Internetem?","Try to repeat the action which you were doing when the error occured. Perhaps it was a one-time network error caused by bad Internet connection?")));f.append(r("<li>").html(r.usosCore.lang("Upewnij się, czy posiadasz odpowiednie uprawnienia. Czy jesteś zalogowany? Być może musisz uzyskać pewne dodatkowe uprawnienia, aby móc wyświetlić stronę lub wykonać akcję, którą właśnie próbowałeś wykonać?","Make sure you have proper privileges. Are you signed in? Perhaps, you need to acquire some special privileges before you can view this page or perform this action?")));f.append(r("<li>").html(r.usosCore.lang("Jeśli problem będzie się powtarzał, to skontaktuj się z administratorem. Napisz na której stronie i w którym momencie problem wystąpuje, tak aby administrator mógł go dokładniej zbadać.","If the problem persists, contact the administrator. Try to include detailed descriptions of where and when the error occurs, so that the administrator will be able to examine it closely.")));b.append(r("<p style='text-align: center; font-size: 120%; margin-top: 20px'>").html(r("<a class='ua-link'>").html(r.usosCore.lang("Zamknij i kontynuuj","Close and continue")).click(function(){b.dialog("close")})))}var d=function(){b.dialog({dialogClass:"ua-panic-dialog",resizable:false,modal:true,width:"600px",height:"auto",closeText:r.usosCore.lang("Zamknij","Close")})};setTimeout(d,a)};var n=function(b,c,a){return function(){var d;var e=arguments;if((a=="getter")||((a=="auto")&&(arguments.length==0))){var f=undefined;this.each(function(){d=r(this).data(b);f=d[c].apply(d,e);return false});return f}return this.each(function(g){d=r(this).data(b);d[c].apply(d,e)})}};var q=function(a){t.preloaderElement.append(a)};r[u]={_getSettings:function(){return t.settings},_console:o,_methodForwarder:n,_preload:q,_nlang:p,init:m,usosapiFetch:w,lang:x,panic:y}})(jQuery);(function(U){var C="_usosApiTable";function B(b,a){this._state=b;this._lastPublishedState=null;this.onStateChanged=a;this.publishState()}B.prototype.publishState=function(a){var b=this.getState();if((!a)&&(b==this.lastPublishedState)){return}this._lastPublishedState=b;this.onStateChanged(b)};B.prototype.getState=function(){return this._state};B.prototype.setState=function(a){this._state=a;this.publishState()};B.prototype.destroy=function(){};function A(d,c,b){this.paramName=d;this._lastPublishedState=null;this.onStateChanged=b;var a=this;U(window).bind("hashchange."+C,function(e){a.publishState()});if(this.getState()===null){this.setState(c)}else{this.publishState()}}A.prototype.publishState=function(a){var b=this.getState();if((!a)&&(b==this.lastPublishedState)){return}this._lastPublishedState=b;this.onStateChanged(b)};A.prototype.getState=function(){var a=U.bbq.getState(this.paramName);if(a){return a}return null};A.prototype.setState=function(a){var b={};b[this.paramName]=a;U.bbq.pushState(b)};A.prototype.destroy=function(){U(window).unbind("hashchange."+C)};var M=function(a){return(U.map(a,function(b){return(b.ascending?"":"-")+b.column})).join("|")};var I=function(a){return U.map(a.split("|"),function(b){return{column:b.replace("-",""),ascending:b[0]!="-"}})};var O=function(a){var b;if(a.currentOrder.length>0){b=a.currentOrder[0]}else{b={column:"",ascending:true}}a.elements.$sorters.each(function(){var c=U(this).data(C);if(c.orderRules[0].column==b.column){c.$img.attr("class",b.ascending?"ua-ascending":"ua-descending");U(this).closest("td").addClass("ua-sorted-by")}else{c.$img.removeClass("ua-ascending ua-descending");U(this).closest("td").removeClass("ua-sorted-by")}})};var K=function(a){return U.extend({},a.settings.params,{order_by:M(a.currentOrder),start:a.currentOffset,num:a.settings.pageLength})};var Q=function(b){var a=U("<div>").addClass("ua-container").addClass("ua-table-container");var f=U("<table>").addClass("ua-table");if(b.nowrap){f.addClass("ua-ellipsis-tds")}a.append(f);var c=P(b);f.append(c);var e=U("<tbody>").addClass("ua-contents");f.append(e);var d=X(b);f.append(d);return a};var P=function(a){var b=U("<thead>");var c=U("<tr>");b.append(c);U.each(a.columns,function(f,e){var d=U("<td>");if(e.width){d.css("width",e.width)}if(e.align){d.css("text-align",e.align)}if(e.sortable){d.addClass("ua-sortable");d.append(U("<a>").attr("tabindex",0).addClass("ua-sorter").attr("data-ua-fields",e.field).html(e.label))}else{d.addClass("ua-nonsortable");d.html(e.label)}if(e.cssClass){U.each(e.cssClass.split(" "),function(g,h){if(h){d.addClass(h)}})}c.append(d)});if(a.actions.length>0){c.append(U("<td>").addClass("ua-nonsortable").addClass("ua-actions").css("width",(1+a.actions.length*19)+"px"))}return b};var D=function(b){var a=b.columns.length;if(b.actions.length>0){a++}return a};var F=function(c,d){if(!c.elements.$contents.is(":parent")){c.elements.$contents.html("<tr class='ua-placeholder'><td></td></tr>").find("td").attr("colspan",D(c.settings))}var a=c.elements.$div.find(".ua-overlay-background");if(a.length===0){a=U("<div>").addClass("ua-overlay-background").hide();c.elements.$div.append(a)}var b=c.elements.$div.find(".ua-overlay-foreground");if(b.length===0){b=U("<table>").addClass("ua-overlay-foreground").hide().append(U("<tr>").append(U("<td>")));c.elements.$div.append(b)}b.find("td").empty().append(d.clone());a.css("left",c.elements.$contents.position().left+1).css("top",c.elements.$contents.position().top+1).css("width",c.elements.$contents.width()-1).css("height",c.elements.$contents.height()-1).fadeIn("slow");b.delay(200).each(function(){if(!U.contains(document.documentElement,a[0])){return}b.css(c.elements.$contents.position()).css("width",c.elements.$contents.width()).css("height",c.elements.$contents.height()).fadeIn(500)})};var W=function(a){a.elements.$div.find(".ua-overlay-background").remove();a.elements.$div.find(".ua-overlay-foreground").remove()};var X=function(a){var b=U("<tfoot>").append(U("<tr>").append(U("<td>").attr("colspan",D(a)).append(U("<table>").css("width","100%").append(U("<tr>")))));b.find("table tr").append(U("<td>").css("vertical-align","middle").append(U("<div>").addClass("ua-summary"))).append(U("<td>").append(U("<ul>").addClass("ua-more").append(U("<div>").addClass("ua-prevpage").button({disabled:true,icons:{primary:"ui-icon-carat-1-w"},label:U.usosCore.lang("POPRZEDNIA STRONA","PREVIOUS PAGE")})).append(U("<div>").addClass("ua-nextpage").button({disabled:true,icons:{secondary:"ui-icon-carat-1-e"},label:U.usosCore.lang("NASTĘPNA STRONA","NEXT PAGE")}))));return b};var H=function(a,b){if(typeof b==="string"){b=U("<span>").text(b)}a.elements.$summary.empty().append(b.clone())};var V=function(a){return U("<td>").addClass("ua-datatype-langdict").append(U.usosCore.lang({langdict:a,wrapper:"jQuery.text"}))};var G=function(b){var a=U("<td>").addClass("ua-datatype-boolean");if(b){a.addClass("ua-true").text(U.usosCore.lang("TAK","YES"))}else{a.addClass("ua-false").text(U.usosCore.lang("NIE","NO"))}return a};var R="1";var S=function(a){return(R+","+a.offset+","+M(a.orderRules).replace(/\|/g,","))};var L=function(b){try{var a=b.split(",");if(a[0]=="1"){return{offset:parseInt(a[1],10),orderRules:I(a.slice(2).join("|"))}}else{throw"Unknown serializer version"}}catch(c){U.usosCore._console.error("Could not deserialize apiTable state:",c);return{offset:0,orderRules:[]}}};var N=function(c,a){if(!a.field){return U("<td>").text("Missing 'field' key in column spec.")}var b;var d=c;U.each(a.field.split("."),function(f,e){d=d[e]});if(typeof d==="object"){b=V(d)}else{if(typeof d==="number"){b=U("<td>").addClass("ua-datatype-number").text(d)}else{if(typeof d==="string"){b=U("<td>").addClass("ua-datatype-string").text(d)}else{if(typeof d==="boolean"){b=G(d)}else{if(d===null){b=U("<td>").append(U("<span>").addClass("ua-note").text(U.usosCore.lang("(brak danych)","(no data)")))}else{if(d===undefined){b=U("<td>").text("Missing field '"+a.field+"' in data feed.")}else{b=U("<td>").text("Unknown column data type.")}}}}}}return b};var E=function(a){return this.each(function(){var e=U(this);if(e.data(C)){e._usosApiTable("destroy")}e.empty();var c={};e.data(C,c);var g={hashParam:null,source_id:"default",method:null,params:{},offsetReset:false,columns:null,defaultOrder:null,pageLength:6,actions:[],emptyMessage:{pl:"Brak wyników",en:"No results"},nowrap:true};c.settings=U.extend({},g,a);e.append(Q(c.settings));c.elements={$root:e,$div:e.find(".ua-table-container"),$table:e.find(".ua-table"),$summary:e.find(".ua-summary"),$sorters:e.find(".ua-sorter").each(function(){var h=U(this);var j=U("<div>").css("margin-left","3px").hide();h.after(j);var k=U("<span>").addClass("ua-loading").hide();j.after(k);h.data(C,{$img:j,$loader:k,orderRules:I(h.attr("data-ua-fields"))});if(h.parent().hasClass("ua-sortable")){h.parent().click(function(){h.trigger("click")})}}).click(function(){if(!c.initialized){return}var j=U(this).data(C);c.elements.$table.find("thead .ua-loading").hide();j.$loader.show();var k=U.map(j.orderRules,function(r,s){return r.column});c.currentOffset=0;var p=true;if(c.currentOrder.length>0&&c.currentOrder[0].column==k[0]&&c.currentOrder[0].ascending===true){p=false}var h=[];var q=[];var n;for(n=0;n<c.currentOrder.length;n++){if(U.inArray(c.currentOrder[n].column,k)!==-1){h[c.currentOrder[n].column]=c.currentOrder[n]}else{q.push(c.currentOrder[n])}}var o=[];for(n=0;n<k.length;n++){var l=null;if(h[k[n]]){l=h[k[n]];l.ascending=p}else{l={column:k[n],ascending:p}}o.push(l)}var m=o;for(n=0;n<q.length;n++){m.push(q[n])}c.stateCoordinator.setState(S({orderRules:m,offset:0}));return false}).keypress(function(h){if(h.which==13){U(this).click()}}),$contents:e.find(".ua-contents"),$prevPage:e.find(".ua-prevpage").click(function(){U(this).button("disable");c.stateCoordinator.setState(S({offset:c.currentOffset-c.settings.pageLength,orderRules:c.currentOrder}))}),$nextPage:e.find(".ua-nextpage").click(function(){U(this).button("disable");c.stateCoordinator.setState(S({offset:c.currentOffset+c.settings.pageLength,orderRules:c.currentOrder}))})};c.syncObject={};c.defaultAction=null;U.each(c.settings.actions,function(j,h){if(h.isDefault){if(c.defaultAction){U.usosCore._console.error("More than one default action defined.");return false}c.defaultAction=h}});c.currentOrder=null;c.currentOffset=0;var b=S({offset:0,orderRules:I(c.settings.defaultOrder)});var d=function(j){c.initialized=true;var h=L(j);c.currentOrder=h.orderRules;c.currentOffset=h.offset;e._usosApiTable("reload")};if(c.settings.hashParam){c.stateCoordinator=new A(c.settings.hashParam,b,d)}else{c.stateCoordinator=new B(b,d)}if(c.settings.offsetReset){var f=L(c.stateCoordinator.getState());f.offset=0;c.stateCoordinator.setState(S(f))}})};var J=function(){return this.each(function(){var b=U(this);var a=b.data(C);U.usosCore._console.log("Reloading with order "+M(a.currentOrder)+"...");O(a);F(a,U("<span>").addClass("ua-loading"));H(a,U("<span>").addClass("ua-loading").text(U.usosCore.lang("Wczytywanie...","Loading...")));U.usosCore.usosapiFetch({source_id:a.settings.source_id,method:a.settings.method,params:K(a),syncMode:"receiveLast",syncObject:a.syncObject,success:function(c){if(a.destroyed){return}a.elements.$contents.empty();U.each(c.items,function(f,h){var e=U("<tr>");e.data(C,h);U.each(a.settings.columns,function(k,l){var j;if(l.customTdFormatter){j=l.customTdFormatter(h)}else{j=N(h,l)}if(l.cssClass){U.each(l.cssClass.split(" "),function(m,n){if(n){j.addClass(n)}})}if(l.align){j.css("text-align",l.align)}if(a.settings.nowrap){j.on("mouseenter",function(){var o=U(this);if(o.attr("title")){return}var m=false;var n=o.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");m=n.width()>o.width();n.remove();if(m){o.attr("title",o.text())}})}e.append(j)});if(a.settings.actions.length>0){var g=U("<td>").addClass("ua-actions");U.each(a.settings.actions,function(k,j){var l=U("<a>").attr("tabindex",0).addClass("ua-action-icon").append(U("<div>").addClass("ui-icon").addClass(j.iconClass)).attr("title",j.label).click(function(){j.click(h);return false}).keypress(function(m){if(m.which==13){U(this).click()}});if((j.isVisible)&&(!j.isVisible(h))){l.css("visibility","hidden")}g.append(l)});e.append(g)}a.elements.$contents.append(e)});if(a.defaultAction){a.elements.$contents.find("tr").hover(function(){U(this).addClass("ua-hovered")},function(){U(this).removeClass("ua-hovered")}).click(function(){a.defaultAction.click(U(this).data(C))})}a.elements.$nextPage.button(c.next_page?"enable":"disable");a.elements.$prevPage.button(a.currentOffset>0?"enable":"disable");a.elements.$table.colResizable({liveDrag:true,headerOnly:true});a.elements.$table.find("thead .ua-loading").hide();W(a);if(a.currentOffset+c.items.length===0){var d=U("<span>").html(U.usosCore.lang(a.settings.emptyMessage));F(a,d);H(a,"")}else{H(a,U.usosCore.lang("Pokazywane elementy ","Showing items ")+(a.currentOffset+1)+".."+(a.currentOffset+c.items.length))}},error:function(c,d,e){var f=U("<span>").html(U.usosCore.lang("Wystąpił błąd podczas wczytywania. Spróbuj odświeżyć stronę (F5).","There was an error while loading. Try to refresh the page (F5)."));F(a,f);H(a,f.clone(true));a.elements.$table.find("thead .ua-loading").hide()}})})};var z=function(){return this.each(function(){var a=U(this);var b=a.data(C);b.destroyed=true;b.stateCoordinator.destroy();b.elements.$root.find("*").addBack().unbind();a.removeData(C)})};var T={init:E,reload:J,destroy:z};U.fn._usosApiTable=function(a){if(T[a]){return T[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof a==="object")||(!a)){return E.apply(this,arguments)}else{U.error("Method "+a+" does not exist on jQuery."+C)}}}})(jQuery);(function(h){var e="usosBadge";var f={destroy:h.usosCore._methodForwarder("usosBadge","destroy","setter")};var g=function(a){switch(a.entity){case"entity/users/user":this._usosUserBadge(a);break;case"entity/fac/faculty":this._usosFacultyBadge(a);break;default:throw"Unknown entity: "+a.entity}return this};h.fn[e]=function(a){if(f[a]){return f[a].apply(this,Array.prototype.slice.call(arguments,1))}else{if((typeof a==="object")||(!a)){return g.apply(this,arguments)}else{h.error("Method "+a+" does not exist on jQuery."+e)}}}})(jQuery);(function(h){var e="usosEntity";var f=function(c){var a={};var j=[];var b=function(m,l){a[m]=l;j.push(l)};switch(c){case"entity/users/user":b("user_id",arguments[1]);break;case"entity/fac/faculty":b("fac_id",arguments[1]);break;case"entity/slips/template":b("tpl_id",arguments[1]);break;case"entity/progs/programme":b("programme_id",arguments[1]);break;default:throw"Unknown entity: "+c}var d=h.usosCore._getSettings().entityURLs[c];if(typeof d==="null"){}if(typeof d==="function"){d=d.apply(null,j);if(typeof d!=="string"){d=null}}else{if(typeof d==="string"){h.each(a,function(m,l){d=d.replace("${"+m+"}",l)})}}return d};var g=function(d,l){var b;if(d){b=h("<a>").attr("class","ua-link")}else{b=h("<span>")}var m;var a;var c=l[0];if((l[1]===null)||(l[1]===undefined)){return h("<span class='ua-note'>").text(h.usosCore.lang("(brak danych)","(no data)"))}switch(c){case"entity/users/user":a=h.usosUtils.requireFields(l[1],"id|first_name|last_name");b.text(a.first_name+" "+a.last_name);b.usosBadge({entity:c,user_id:a.id});m=f(c,a.id);break;case"entity/fac/faculty":a=h.usosUtils.requireFields(l[1],"id|name");b.text(h.usosCore.lang(a.name));b.usosBadge({entity:c,fac_id:a.id});m=f(c,a.id);break;case"entity/slips/template":a=h.usosUtils.requireFields(l[1],"id|name");b.text(h.usosCore.lang(a.name));m=f(c,a.id);break;case"entity/progs/programme":a=h.usosUtils.requireFields(l[1],"id|description");b.text(h.usosCore.lang(a.description));m=f(c,a.id);break;default:throw"Unknown entity: "+c}if(d&&m){b.attr("href",m)}return b};h[e]={label:function(){return g.call(null,false,arguments)},link:function(){return g.call(null,true,arguments)},url:f}})(jQuery);(function(f){var d="usosForms";var e={hideErrors:f.usosCore._methodForwarder("usosValue","_hideErrors","setter"),showErrors:function(b){if((!b)||(!b.user_messages)){f.usosCore.panic(b);return false}var a=b.user_messages.fields;if(!a){f.usosCore.panic(b);return false}var c=f.extend({},b.user_messages.fields);this.each(function(){var g=f(this).data("usosValue")._showErrors(b);f.each(g,function(l,k){delete c[k]})});var h=0;f.each(c,function(){h++});if(h===0){return true}if(f.usosCore._getSettings().debug){f.usosCore._console.warn("showErrors: failed to match some fields. Will resolve to $.usosCore.panic. The following keys:",c,"were not found in",this)}this.usosForms("hideErrors");f.usosCore.panic(b);return false},flatValues:function(){var a={};this.each(function(){f.each(f(this).data("usosValue")._flatValues(),function(c,b){a[c]=b})});return a},values:function(){if(arguments.length==0){var b={};this.each(function(){var c=f(this).data("usosValue");b[c.options.name]=c.value()});return b}var a=arguments[0];this.each(function(){var c=f(this).data("usosValue");if(a[c.options.name]!==undefined){c.value(a[c.options.name])}});return this},findValueWidgets:function(){var b=this.find(".ua-usosvalue").addBack(".ua-usosvalue");var a=function(){return b.has(this).length>0};return b.not(a)}};f.fn[d]=function(a){if(e[a]){return e[a].apply(this,Array.prototype.slice.call(arguments,1))}else{f.error("Method "+a+" does not exist on jQuery."+d)}}})(jQuery);(function(k){var f="usosUtils";var h=function(){var e=function(n,o){var p=n;k.each(o,function(m,l){p=p[l];if(typeof p==="undefined"){return p}});return p};var d=function(s,t,p){var q=s;var r=t.length-1;k.each(t,function(m,l){if(m==r){q[l]=p}else{if(typeof q[l]==="undefined"){q[l]={}}q=q[l]}})};var b=function(m,n){return m};var a=function(A,z){var B={};var s=[];var u="";var C=z+"$";for(var y=0;y<C.length;y++){var x=C.charAt(y);if(x=="["||x=="]"||x=="|"||x=="$"){s.push(u);var w=null;if(u!==""){w=e(A,s);if(typeof w==="undefined"){k.usosCore._console.error("Required field "+s.join(".")+" not found.")}}if(x=="["){}else{if(x=="|"||x=="$"){if(u!==""){d(B,s,w)}s.pop()}else{if(x=="]"){if(u!==""){d(B,s,w)}s.pop();s.pop()}}}u=""}else{u+=x}}return B};var c=null;return function(){if(!c){c=k.usosCore._getSettings().debug?a:b}return c.apply(null,arguments)}}();var g=function(a){var b=a.split(/[\r\n]{2,}/);var c=k("<div>");k.each(b,function(e,d){c.append(k("<p>").text(d))});return c.children()};var j=function(c,a){var e;if(typeof a==="undefined"){a=true}if(c instanceof k){e=c}else{e=k.usosCore.lang({langdict:c,wrapper:"jQuery.html"})}if(a){var l=e.text().length;var d;if(l<30){d="auto"}else{if(l<300){d="300px"}else{if(l<1200){var b=1-((1200-l)/900);d=(300+300*b)+"px"}else{d="600px"}}}e=k("<div>").append(e).css("max-width",d)}return k("<div>").append(e)};k[f]={_tooltipster_html:j,requireFields:h,makeParagraphs:g}})(jQuery);(function(f){var d="usosValue";var e={value:f.usosCore._methodForwarder("usosValue","value","auto"),enable:f.usosCore._methodForwarder("usosValue","enable","setter"),disable:f.usosCore._methodForwarder("usosValue","disable","setter"),focus:f.usosCore._methodForwarder("usosValue","focus","setter")};f.fn[d]=function(a){if(e[a]){return e[a].apply(this,Array.prototype.slice.call(arguments,1))}else{f.error("Method "+a+" does not exist on jQuery."+d)}}})(jQuery);(function(c){var d={};c.widget("usosWidgets._usosBadge",{options:{entity:null,position:"right"},_create:function(){var a=this;a.element.data("usosBadge",this);a._on(a.element,{mouseenter:function(){a.timeoutId=setTimeout(function(){a._create2()},200)},mouseleave:function(){clearTimeout(a.timeoutId)}})},_create2:function(){var a=this;if(a.timeoutId){a._off(a.element,"mouseenter mouseleave");clearTimeout(a.timeoutId);a.timeoutId=null;var b=setTimeout(function(){a.element.tooltipster("show");a._off(a.element,"mouseout")},200);a._on(a.element,{mouseleave:function(){clearTimeout(b)}})}if(a.element.closest(".ua-tooltip").length>0){a.destroy();return}a.element.tooltipster({content:c.usosUtils._tooltipster_html("<p class='ua-loading'>"+c.usosCore.lang("Wczytywanie...","Loading...")+"</p>"),onlyOne:false,delay:400,updateAnimation:false,interactive:true,speed:0,position:a.options.position,theme:"ua-tooltip ua-tooltip-badge "+a._cssClass(),arrowColor:a._getArrowColor(a.options.position),functionAfter:function(){a._updateBadgeContent()}});a._updateBadgeContent()},_updateBadgeContent:function(){var a=this;a._fetchData().done(function(b){a.element.tooltipster("update",a._createBadge(b))}).fail(function(){a.element.tooltipster("update",c("<p class='ua-loading'>").text(c.usosCore.lang("Wystąpił błąd. Prosimy odświeżyć stronę.","Error occured. Please refresh the page.")))})},_fetchData:function(){var a=this;var g=c.Deferred();var b;if(!d.hasOwnProperty(a.options.entity)){d[a.options.entity]={}}b=d[a.options.entity];var h=a._getCacheKey();if(b[h]){g.resolve(b[h])}else{a._fetchData2().done(function(e){b[h]=e;g.resolve(e)}).fail(function(){g.reject()})}return g.promise()},_setOption:function(b,a){this._create2();return this},_destroy:function(){var a=this;a.element.tooltipster("destroy")},_getCacheKey:function(){var a=this;var b=[];c.each(a._getEntityKey(),function(h,g){b.push(a.options[g])});return JSON.stringify(b)},_getArrowColor:function(a){return undefined}})})(jQuery);(function(b){b.widget("usosWidgets._usosValue",{options:{name:null,value:null},_init:function(){this.element.addClass("ua-usosvalue");this.element.data("usosValue",this);this.element.attr("data-name",this.options.name)},_destroy:function(){this._hideErrors();this.element.removeClass("ua-usosvalue")},_flattenValue:function(a){if(typeof a==="string"){return a}else{if(b.isArray(a)){return a.join("|")}else{if(a===null){return null}else{if(typeof a==="boolean"){return a?"true":"false"}}}}throw"Internal jQuery-USOS error. Invalid value for _flattenValue."},_flatValues:function(){var a={};var d=this.value();if(d!==null){a[this.options.name]=this._flattenValue(this.value())}return a},_showErrors:function(a){var d=a.user_messages.fields[this.options.name];if(d){this._displayError(d,this.options.name);return[this.options.name]}else{return[]}},_displayError:function(d,a){this.element.usosNotice({content:b.usosCore.lang(d)})},_hideErrors:function(){this.element.find(".ua-usosnotice").addBack(".ua-usosnotice").usosNotice("hide")},_focus:function(){var a=this.element.find("input, textarea, select, button").first();a.trigger("focus")},focus:function(){if(!this.options.disabled){this._focus()}},disable:function(){this._super("disable");this.element.find(".ui-button").button("option","disabled",true);this.element.find("input, textarea, select, button").prop("disabled",true)},enable:function(){this._super("enable");this.element.find(".ui-button").button("option","disabled",false);this.element.find("input, textarea, select, button").prop("disabled",false)},value:function(d){var a=this;if(typeof d==="undefined"){return a.option("value")}a.option("value",d);return this}})})(jQuery);(function(b){b.widget("usosWidgets._usosFacultyBadge",b.usosWidgets._usosBadge,{options:{position:"top",fac_id:null},widgetEventPrefix:"usosbadge:",_getEntityKey:function(){return["fac_id"]},_cssClass:function(){return"ua-badge-fac"},_fetchData2:function(){var a=this;return b.usosCore.usosapiFetch({method:"services/fac/faculty",params:{fac_id:a.options.fac_id,fields:("id|profile_url|name|phone_numbers|homepage_url|postal_address|path[id|profile_url|name]|static_map_urls[400x200]|stats[programme_count|course_count|staff_count]")}})},_createBadge:function(l){var o=b("<div class='ua-container'><table><tr><td class='ua-stats'><div></div></td></tr><tr><td class='ua-cover'><div class='ua-cover-inner'><div class='ua-title'></div></div></td></tr><tr><td class='ua-desc'><div></div></td></tr></table></div>");if(l.static_map_urls["400x200"]!=null){o.find(".ua-cover").css("background-image","url("+l.static_map_urls["400x200"]+")")}var j=o.find(".ua-title");b.each(l.path,function(d,c){j.append(b("<div class='ua-ancestor'>").html(b("<a>").attr("href",b.usosEntity.url("entity/fac/faculty",c.id)||c.profile_url).text(b.usosCore.lang(c.name))))});j.append(b("<div class='ua-name'>").html(b("<a>").attr("href",b.usosEntity.url("entity/fac/faculty",l.id)||l.profile_url).text(b.usosCore.lang(l.name))));var n=o.find(".ua-stats div");var p=function(g,d,e,f,h,c){n.append(b("<div class='ua-stat-entry'>").append(b("<b>").text(g)).append(" ").append(b.usosCore._nlang(g,d,e,f,h,c)))};if(l.stats.staff_count>0){p(l.stats.staff_count,"pracownik","pracowników","pracowników","staff member","staff members")}if(l.stats.programme_count>0){p(l.stats.programme_count,"program studiów","programy studiów","programów studiów","study programme","study programmes")}if(l.stats.course_count>0){p(l.stats.course_count,"przedmiot","przedmioty","przedmiotów","course","courses")}var k=o.find(".ua-desc div");if(l.postal_address||(l.phone_numbers.length>0)){var a=b("<div class='ua-address'>");k.append(a);if(l.postal_address){var m="https://maps.google.pl/?q="+encodeURIComponent(l.postal_address);a.append(b("<div>").append(b("<span>").text(l.postal_address)).append(b("<a class='ua-relative'>").attr("target","_blank").attr("href",m).html(b("<span class='ui-icon ui-icon-extlink'></span>").usosTip({type:"tool",position:"bottom",delayed:true,content:b.usosCore.lang("Pokaż w mapach Google","Show in Google Maps")}))))}if(l.phone_numbers.length>0){a.append(b("<div>").text("Tel: "+l.phone_numbers.join(", ")))}}if(l.homepage_url){k.append(b("<a class='ua-www'>").attr("target","_blank").attr("href",l.homepage_url).text(l.homepage_url))}return o}})})(jQuery);(function(b){b.widget("usosWidgets._usosUserBadge",b.usosWidgets._usosBadge,{options:{user_id:null},widgetEventPrefix:"usosbadge:",_getEntityKey:function(){return["user_id"]},_cssClass:function(){return"ua-badge-user"},_fetchData2:function(){var f=this;var e=b.usosEntity.url("entity/users/user",f.options.user_id);var a="id|first_name|last_name|photo_urls[100x100]|sex|student_programmes|employment_functions|employment_positions";if(!e){a+="|profile_url"}return b.usosCore.usosapiFetch({method:"services/users/user",params:{user_id:f.options.user_id,fields:a}}).then(function(c){if(e){c.profile_url=e}return c})},_createBadge:function(h){var g=this;var j=b("<div><table class='ua-container'><tr><td class='ua-td1'><a class='ua-photo-link'><img class='ua-photo'/></a></td><td class='ua-td2'><div class='ua-td2top'><div class='ua-name'></div><ul class='ua-functions'></ul></div></td></tr></table></div>");j.find(".ua-photo").attr("src",h.photo_urls["100x100"]);j.find(".ua-name").html(b("<a>").attr("href",h.profile_url).text(h.first_name+" "+h.last_name));j.find(".ua-photo-link").attr("href",h.profile_url);var k={};b.each(h.employment_functions,function(d,c){if(!k.hasOwnProperty(c.faculty.id)){k[c.faculty.id]={faculty:c.faculty,names:[]}}k[c.faculty.id].names.push(c["function"])});b.each(h.employment_positions,function(d,c){if(!k.hasOwnProperty(c.faculty.id)){k[c.faculty.id]={faculty:c.faculty,names:[]}}k[c.faculty.id].names.push(c.position.name)});b.each(k,function(d,c){var e=b("<li>").append(b.usosEntity.link("entity/fac/faculty",c.faculty)).append(b("<br>"));c.names.sort(function(f,l){return f.length>l.length?-1:1});b.each(c.names,function(f,l){if(f>0){e.append(b("<br>"))}e.append(b("<span class='ua-func'>").text(b.usosCore.lang(l)))});j.find(".ua-functions").append(e)});if(h.student_programmes.length>0){var a=b("<li>").append(b.usosCore.lang(h.sex=="M"?"Student":"Studentka","Student"));b.each(h.student_programmes,function(d,c){a.append(b("<br>"));a.append(b.usosEntity.link("entity/progs/programme",c.programme))});j.find(".ua-functions").append(a)}if(h.id==b.usosCore._getSettings().usosAPIs["default"].user_id){j.find(".ua-td2").append(b("<div class='ua-privacy-note'>").append(b("<span>").text(b.usosCore.lang("Kto może oglądać moje zdjęcie?","Who can see my photo?")).usosTip({content:function(){return b.usosCore.usosapiFetch({method:"services/photos/my_photo_visibility"}).then(function(c){var d=b("<div>").css("max-width","200px");d.append(b("<p>").text(b.usosCore.lang(c.desc_for_user)));d.append(b("<p>").text(b.usosCore.lang("Widoczność zdjęcia możesz zmienić na stronie preferencji w USOSweb.","You can change this visibility in your USOSweb preferences page.")));return d})},position:"bottom",type:"tool",_autoWidth:false})))}return j}})})(jQuery);(function(b){b.widget("usosWidgets.usosCheckbox",b.usosWidgets._usosValue,{options:{value:false,caption:""},widgetEventPrefix:"usoscheckbox:",_init:function(){var a=this;a._super("_init");a._build()},_build:function(){var e=this;e.element.empty();var f;if(e.options.caption instanceof b){f=e.options.caption}else{f=b("<span>").html(b.usosCore.lang(e.options.caption))}e.element.append(b("<label>").append(b("<table class='ua-checkbox'>").append(b("<tr>").append(b("<td>").append(b("<input type='checkbox'>"))).append(b("<td>").append(f)))));var a=e.element.find("input");if(e.options.value){a.prop("checked",true)}a.on("change",function(c){e.options.value=a.prop("checked");e._trigger("change",c)})},_setOption:function(a,d){this._super(a,d);if(b.inArray(a,["caption"])!==-1){this._build()}else{if(a=="value"){this.element.find("input").prop("checked",d?true:false)}}return this},_destroy:function(){this.element.empty();this._super("_destroy")}})})(jQuery);(function(f){var e=false;var d=function(c){var a=f(window).scrollTop();var b=a+f(window).height();var k=f(c).offset().top;var j=k+f(c).height();return((j<=b)&&(k>=a))};f.widget("usosWidgets.usosNotice",{options:{content:"",scroll:true},widgetEventPrefix:"usosnotice:",_create:function(){var a=this;a.element.addClass("ua-usosnotice");a.element.tooltipster({trigger:"custom",interactive:true,content:f.usosUtils._tooltipster_html(a.options.content),onlyOne:false,position:"right",theme:"ua-tooltip ua-tooltip-error",functionReady:function(){a._tooltipReady()},functionAfter:function(){a.destroy()}});var b=function(){a.hide()};a._on(a.element.find(":focusable").addBack(":focusable"),{focus:b,keypress:b,change:b})},_init:function(){var a=this;a.element.tooltipster("show");a._scroll()},_scroll:function(){var a=this;var b=a.element.data("tooltipster");if(b&&a.options.scroll&&(!d(b))&&(!e)){e=true;f("html, body").animate({scrollTop:a.element.data("tooltipster").offset().top-30},500,function(){e=false})}},_tooltipReady:function(){var a=this;var b=a.element.data("tooltipster");b.css("pointer-events","");b.find(".tooltipster-content").css("pointer-events","auto");a._scroll();a._on(b.find(".tooltipster-content"),{click:function(){a._trigger(a.element.find(":focusable").addBack(":focusable").first(),"focus");a.hide()},mouseleave:function(){return false}})},hide:function(){this.element.tooltipster("hide")},_setOption:function(c,a){var b=this;b._super(c,a);if(c=="content"){b.element.tooltipster("update",f.usosUtils._tooltipster_html(b.options.content))}return b},_destroy:function(){this.element.tooltipster("destroy");this.element.removeClass("ua-usosnotice")}})})(jQuery);(function(c){var d=function(a){var b=0;a.parents().each(function(){var f=parseInt(c(this).css("zIndex"),10);if(f>b){b=f}});return b};c.widget("usosWidgets.usosProgressOverlay",{options:{type:"loading",delay:300,opacity:0.8,fadeDuration:300},widgetEventPrefix:"usosprogressoverlay:",_create:function(){var b=this;b.bg=c("<div>").addClass("ua-progressoverlay-background").hide();c(document.body).append(b.bg);b.fg=c("<table>").addClass("ua-progressoverlay-foreground").hide().append(c("<tr>").append(c("<td>")));c(document.body).append(b.fg);b.fg.find("td").empty();b.bg.add(b.fg).css("z-index",d(b.element)).css("left",b.element.offset().left).css("top",b.element.offset().top).css("width",b.element.outerWidth()).css("height",b.element.outerHeight()).css("opacity",b.options.opacity).delay(b.options.delay).each(function(){if(c("body").has(b.bg).length>0){c(this).fadeIn(b.options.fadeDuration)}});var a;switch(b.options.type){case"loading":a=c.usosCore.lang("Wczytywanie...","Loading...");break;case"saving":a=c.usosCore.lang("Zapisywanie...","Saving...");break;default:throw ("Unknown type: "+b.options.type)}b.fg.find("td").append(c("<span>").attr("class","ua-loading").attr("title",a));b.fg.delay(b.options.delay+(b.options.fadeDuration/2)).each(function(){if(b.bg&&b.fg){b.fg.fadeIn(b.options.fadeDuration)}})},_destroy:function(){var a=this;if(a.bg){a.bg.stop(true).remove();delete a.bg}if(a.fg){a.fg.stop(true).remove();delete a.fg}}})})(jQuery);(function(b){b.widget("usosWidgets.usosSelectbox",b.usosWidgets._usosValue,{options:{width:"300px",value:"",options:[]},widgetEventPrefix:"usosselectbox:",_init:function(){var a=this;a._super("_init");a._build()},_createOption:function(g,f,h){var a=b("<option>").text(b.usosCore.lang(f));if(typeof g==="string"){a.attr("value",g)}else{a.attr("value","(complex)");a.data("value",g)}if(h){a.prop("selected",true)}return a},_getOptionValue:function(a){if(b(a).data("value")!==undefined){return b(a).data("value")}else{return b(a).attr("value")}},_getSelectValue:function(){var a=this.element.find("select option:selected");if(a.length>0){return this._getOptionValue(a)}else{return null}},_build:function(){var f=this;f.element.empty().append(b("<select class='ua-form'>").css("width",f.options.width));var e=f.value();var a=f.element.find("select");b.each(f.options.options,function(d,c){a.append(f._createOption(c.value,c.caption,e===c.value))});a.on("change",function(c){f.options.value=f._getSelectValue();f._trigger("change",c)})},_setOption:function(a,e){this._super(a,e);var f=this;if(b.inArray(a,["width","options"])!==-1){f._build()}else{if(a=="value"){f.element.find("select").val(e);if(f._getSelectValue()!==e){b.each(f.element.find("select option"),function(d,c){if(f._getOptionValue(c)===e){c.prop("selected",true);return false}})}}}return this},_destroy:function(){this.element.empty();this._super("_destroy")}})})(jQuery);(function(m){var l=null;var o=function(a){if(l===null){l={"entity/users/user":{prompt:m.usosCore.lang("Wpisz imię i nazwisko","Enter the user's name"),search:{method:"services/users/search",paramsProvider:function(b){return{name:b,num:6}},itemsExtractor:function(b){return b.items}},get:{method:"services/users/users",paramsProvider:function(b){return{user_ids:b.join("|"),fields:"id|first_name|last_name"}},itemsExtractor:function(b){var c=[];m.each(b,function(e,d){if(d===null){m.usosCore._console.warn("User "+e+" not found! Will be skipped!");return true}c.push(d)});return c}},idExtractor:function(b){return b.user_id||b.id},suggestionRenderer:function(b){var c=m("<div class='ua-usersuggestion'><table><tr><td class='ua-td2'><div class='ua-match'></div><div class='ua-tagline'></div></td></tr></table></div>");c.find(".ua-match").html(b.match);m.each(b.active_employment_functions,function(e,d){c.find(".ua-tagline").append(m("<span class='ua-note'>").text(m.usosCore.lang(d["function"])+" ("+m.usosCore.lang(d.faculty.name)+")")).append(" ")});m.each(b.active_student_programmes,function(e,d){c.find(".ua-tagline").append(m("<span class='ua-note'>").text(m.usosCore.lang(d.programme.description))).append(" ")});c.usosBadge({entity:"entity/users/user",user_id:b.user_id||b.id});return c},tagRenderer:function(b){var c;if(b.match){c=m("<span>").html(b.match).text()}else{c=b.first_name+" "+b.last_name}return m("<span>").text(c).usosBadge({entity:"entity/users/user",user_id:b.user_id||b.id,position:"top"})}},"entity/courses/course":{prompt:m.usosCore.lang("Wpisz nazwę przedmiotu","Enter a course name"),search:{method:"services/courses/search",paramsProvider:function(b){return{lang:m.usosCore.lang(),name:b}},itemsExtractor:function(b){return b.items}},get:{method:"services/courses/courses",paramsProvider:function(b){return{course_ids:b.join("|"),fields:"id|name"}},itemsExtractor:function(b){var c=[];m.each(b,function(d,e){if(e===null){m.usosCore._console.warn("Course "+d+" not found! Will be skipped!");return true}c.push(e)});return c}},idExtractor:function(b){return b.course_id||b.id},suggestionRenderer:function(b){return b.match},tagRenderer:function(b){var d;if(b.match){d=m("<span>").html(b.match).text();var c=d.indexOf(" ("+b.course_id+")");if(c>0){d=d.substring(0,c)}}else{d=m.usosCore.lang(b.name)}return m("<span>").text(d).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"180px","text-overflow":"ellipsis"})}},"entity/fac/faculty":{prompt:m.usosCore.lang("Wpisz nazwę jednostki","Enter a faculty name"),search:{method:"services/fac/search",paramsProvider:function(b){return{lang:m.usosCore.lang(),fields:"id|match|name",query:b}},itemsExtractor:function(b){return b.items}},get:{method:"services/fac/faculties",paramsProvider:function(b){return{fac_ids:b.join("|"),fields:"id|name"}},itemsExtractor:function(b){var c=[];m.each(b,function(e,d){if(d===null){m.usosCore._console.warn("Faculty "+e+" not found! Will be skipped!");return true}c.push(d)});return c}},idExtractor:function(b){return b.fac_id||b.id},suggestionRenderer:function(c){var b=m("<div>");b.html(c.match);b.usosBadge({entity:"entity/fac/faculty",fac_id:c.fac_id||c.id});return b},tagRenderer:function(b){var c=m.usosCore.lang(b.name);return m("<span>").text(c).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"250px","text-overflow":"ellipsis"}).usosBadge({entity:"entity/fac/faculty",fac_id:b.fac_id||b.id,position:"top"})}},"entity/slips/template":{prompt:m.usosCore.lang("Wpisz nazwę szablonu obiegówki","Enter a slip template name"),search:{method:"services/slips/search_templates",paramsProvider:function(b){return{langpref:m.usosCore.lang(),fields:"id|match|name|state",query:b}},itemsExtractor:function(b){return b.items}},get:{method:"services/slips/templates",paramsProvider:function(b){return{tpl_ids:b.join("|"),fields:"id|name"}},itemsExtractor:function(b){var c=[];m.each(b,function(d,e){if(e===null){m.usosCore._console.warn("Template "+d+" not found! Will be skipped!");return true}c.push(e)});return c}},idExtractor:function(b){return b.id},suggestionRenderer:function(b){var c=m("<div>");c.append(m("<span>").html(b.match));if(b.state!="active"){c.append(" ").append(m("<span class='ua-note'>").text(b.state=="draft"?m.usosCore.lang("(kopia robocza)","(draft)"):m.usosCore.lang("(przestarzały)","(obsolete)")))}return c},tagRenderer:function(b){return m("<span>").text(b.name).css({"white-space":"nowrap",display:"inline-block",overflow:"hidden","max-width":"250px","text-overflow":"ellipsis"}).click(function(){var d=m.usosEntity.url("entity/slips/template",b.id);if(!d){return}var c=m.usosCore.lang('Przejść do strony szablonu "'+b.name+'"?','Go to the "'+b.name+'" template page?');if(confirm(c)){document.location=d}})}}}}if(!(a in l)){throw"Unknown entity: "+a}return l[a]};var n=function(a,b){return JSON.stringify(a)==JSON.stringify(b)};var q=function(){return 0.25};var p=null;var j=function(b,a){k();p=setTimeout(function(){p=null;a()},b*1000)};var k=function(){if(p){clearTimeout(p);p=null}};m.widget("usosWidgets.usosSelector",m.usosWidgets._usosValue,{options:{entity:null,source_id:"default",width:"300px",multi:false,value:null,searchParams:{}},widgetEventPrefix:"usosselector:",_init:function(){this._super("_init");this._recreate()},_setOption:function(b,a){this._super(b,a);if(m.inArray(b,["entity","width","multi"])!==-1){this._recreate()}else{if(b=="value"){this.value(b,a)}}return this},_recreate:function(){this._entitySetup=o(this.options.entity);this._knownItems={};this.element.empty().addClass("ua-container ua-selector").css("width",this.options.width).append(m("<textarea>").attr("rows","1").css("width",this.options.width));this._suggestionsSyncObject={};this._previousValue=this.options.multi?[]:null;this._textarea=this.element.find("textarea");var c=this.element.offset().top;var b=m(document).height()-(this.element.offset().top+this.element.height());var a=this;a._textarea.textext({plugins:"autocomplete tags focus prompt",prompt:a._entitySetup.prompt,autocomplete:{dropdown:{maxHeight:"250px",position:(b>200)?"below":((c>b)?"above":"below")},render:function(d){var e=m("<span>").html(a._entitySetup.suggestionRenderer(a._knownItems[d]));e.find("*").addBack().addClass("text-label");return e}},ext:{tags:{renderTag:function(e){var d=m(this.opts("html.tag"));d.find(".text-label").html(a._entitySetup.tagRenderer(a._knownItems[e]));d.data(a.widgetFullName,a._knownItems[e]);d.data("text-tag",e);return d}}}}).bind("getSuggestions",function(g,h){var f=m(this);var e=m(g.target).textext()[0];var d=(h?h.query:"")||"";j(q(),function(){m.usosCore.usosapiFetch({source_id:a.options.source_id,method:a._entitySetup.search.method,params:m.extend({},a.options.searchParams,a._entitySetup.search.paramsProvider(d)),syncMode:"receiveIncrementalFast",syncObject:a._suggestionsSyncObject,success:function(s){var t=[];m.each(a._entitySetup.search.itemsExtractor(s),function(x,w){var r=a._entitySetup.idExtractor(w);a._knownItems[r]=w;t.push(r)});f.trigger("setSuggestions",{result:t})},error:function(t,u,w){a._textarea.usosNotice({content:m.usosCore.lang("Nie udało się wczytać listy sugestii. Spróbuj odświeżyć stronę (F5).","Could not load the list of suggestions. Try to refresh tha page (F5).")})}})})}).bind("isTagAllowed",function(f,d){if(!a._knownItems[d.tag]){a._textarea.usosNotice({content:m.usosCore.lang("Przed wciśnięciem Enter należy poczekać na załadowanie listy sugestii.","Before pressing Enter, you should wait until the suggestions show up.")});d.result=false;return}var e=a._getIds();if((!a.options.multi)&&(e.length>0)){a._setIds([]);return}if(a.options.multi&&m.inArray(d.tag,e)!==-1){a._textarea.usosNotice({content:m.usosCore.lang("Ta pozycja już znajduje się na liście.","This item is already on the list.")});d.result=false;return}}).bind("setFormData",function(){var d=a.element.usosSelector("value");a.options.value=d;if(!a.options.multi){if(d===null){a._markUnfilled()}else{a._markFilled()}}if(!n(d,a._previousValue)){a._previousValue=d;a._trigger("change")}});if(a.options.value){a.element.usosSelector("value",a.options.value)}},_markFilled:function(){this.element.addClass("ua-filled")},_markUnfilled:function(){this.element.removeClass("ua-filled")},_getIds:function(){var b=[];var a=this;m.each(a._textarea.textext()[0].tags().tagElements(),function(d,c){b.push(a._entitySetup.idExtractor(m(c).data(a.widgetFullName)))});return b},_setIds:function(d){var b=this;var a=b._textarea.prop("disabled");b._textarea.prop("disabled",true);var e=function(){m.each(b._getIds(),function(h,g){b._textarea.textext()[0].tags().removeTag(g)});var f=d.filter(function(g){return typeof b._knownItems[g]!=="undefined"});b._textarea.textext()[0].tags().addTags(f);b._textarea.prop("disabled",a);if(f.length<d.length){b._textarea.usosNotice({content:m.usosCore.lang("Wystąpił błąd podczas wczytywania wartości tego pola. Sprawdź, czy pole zawiera pożądaną wartość. Jeśli problem będzie się powtarzał, proszę skontaktować się z administratorem.","Error occured while loading values for this form field. Check if the field has the proper value. If this problem persists, please contact the administrator.")})}};var c=d.filter(function(f){return typeof b._knownItems[f]==="undefined"});if(c.length>0){b.element.usosProgressOverlay();m.usosCore.usosapiFetch({source_id:b.options.source_id,method:b._entitySetup.get.method,params:b._entitySetup.get.paramsProvider(c),success:function(f){b.element.usosProgressOverlay("destroy");m.each(b._entitySetup.get.itemsExtractor(f),function(r,h){var g=b._entitySetup.idExtractor(h);b._knownItems[g]=h});e()},error:function(f,g,h){b._textarea.usosNotice({content:m.usosCore.lang("Wystąpił błąd podczas wczytywania wartości tego pola. Spróbuj odświeżyć stronę (F5).","Error occured while loading values for this form field. Try to refresh the page (F5).")})}})}else{e()}},value:function(a){if(typeof a==="undefined"){var b=this._getIds();if(this.options.multi){return b}else{if(b.length===0){return null}else{return b[0]}}}if(this.options.multi){this._setIds(a)}else{if(a===null){this._setIds([])}else{this._setIds([a])}}return this},_destroy:function(){this.element.empty();this._super("_destroy")}})})(jQuery);(function(b){b.widget("usosWidgets.usosTextbox",b.usosWidgets._usosValue,{options:{value:"",placeholder:null,multiline:false},widgetEventPrefix:"usostextbox:",_init:function(){var a=this;a._super("_init");a._build();if(this.options.disabled){this.disable()}},_build:function(){var f=this;f.element.empty();var a;var e;if(!f.options.multiline){a=b("<input type='text' class='ua-form'>");e=300}else{a=b("<textarea class='ua-form'>");e=450}f.element.append(a);if(f.options.disabled){a.prop("disabled",true)}a.css("width",(e-9)+"px");a.val(f.options.value);if(f.options.placeholder){a.attr("placeholder",b.usosCore.lang(f.options.placeholder))}a.on("change",function(c){f.options.value=a.val();f._trigger("change",c)})},_setOption:function(a,d){this._super(a,d);if(b.inArray(a,["placeholder","multiline"])!==-1){this._build()}else{if(a=="value"){this.element.find("input, textarea").val((d===null)?"":d)}}return this},_destroy:function(){this.element.empty();this._super("_destroy")}})})(jQuery);(function(c){c.widget("usosWidgets.usosTip",{options:{content:"",position:"top",delayed:false,type:"default",_autoWidth:true},widgetEventPrefix:"usostip:",defaultElement:"<span>",_create:function(){var j=this;var k=null;var l=null;if(typeof j.options.content==="function"){k=c.usosCore.lang("Wczytywanie...","Loading...");l=j.options.content}else{k=j.options.content}var b="ua-tooltip ";var m=0;var a=0;if(j.options.type=="tool"){b+="ua-tooltip-tool";if(j.options.position=="left"||j.options.position=="right"){m=-4}else{a=-4}}else{b+="ua-tooltip-default"}j.element.tooltipster({content:c.usosUtils._tooltipster_html(k,j.options._autoWidth),onlyOne:false,delay:j.options.delayed?500:(l?200:50),speed:0,position:j.options.position,offsetX:m,offsetY:a,updateAnimation:false,theme:b,functionReady:function(){if(l===null){return}var e=l.apply(j.element);l=null;e.done(function(f){j.element.tooltipster("update",c.usosUtils._tooltipster_html(f,j.options._autoWidth))}).fail(function(){var f=c.usosCore.lang("Nie udało się załadować treści podpowiedzi. Odśwież stronę i spróbuj ponownie.","Could not load the content of the tip. Refresh the page and try again.");j.element.tooltipster("update",c.usosUtils._tooltipster_html(f))})}});j.element.attr("tabindex",0);j._on(j.element,{focus:function(){j.element.tooltipster("show")},blur:function(){j.element.tooltipster("hide")}})},_setOption:function(f,a){var b=this;this._super(f,a);if(f=="content"){b.element.tooltipster("update",c.usosUtils._tooltipster_html(b.options.content,b.options._autoWidth))}return b},_destroy:function(){this.element.tooltipster("destroy")}});var d=function(){if(arguments.length==1){if(arguments[0] instanceof c){return d({content:arguments[0]})}else{if(typeof arguments[0].content!=="undefined"){}else{if((typeof arguments[0].pl!=="undefined")||(typeof arguments[0].en!=="undefined")){return d({content:arguments[0]})}else{if(typeof arguments[0]==="function"){return d({content:arguments[0]})}else{return d(arguments[0],arguments[0])}}}}}else{if(arguments.length==2){return d({content:{pl:arguments[0],en:arguments[1]}})}else{throw ("Invalid arguments")}}return c("<div class='ua-tip'><div/></div>").usosTip(arguments[0])};c.usosWidgets.usosTip.create=d})(jQuery);